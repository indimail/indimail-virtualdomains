<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<title>Fetchmail Manual</title>
<meta name="dcterms.date" content="2022-07-16" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/"/>
<style type="text/css">

/* Minimal style sheet for the HTML output of Docutils.                    */
/*                                                                         */
/* :Author: Günter Milde, based on html4css1.css by David Goodger          */
/* :Id: $Id: minimal.css 8783 2021-06-30 07:47:46Z milde $                                                               */
/* :Copyright: © 2015, 2021 Günter Milde.                                  */
/* :License: Released under the terms of the `2-Clause BSD license`_,      */
/*    in short:                                                            */
/*                                                                         */
/*    Copying and distribution of this file, with or without modification, */
/*    are permitted in any medium without royalty provided the copyright   */
/*    notice and this notice are preserved.                                */
/*                                                                         */
/*    This file is offered as-is, without any warranty.                    */
/*                                                                         */
/* .. _2-Clause BSD license: http://www.spdx.org/licenses/BSD-2-Clause     */

/* This CSS3 stylesheet defines rules for Docutils elements without        */
/* HTML equivalent. It is required to make the document semantics visible. */
/*                                                                         */
/* .. _validates: http://jigsaw.w3.org/css-validator/validator$link        */

/* titles */
p.topic-title,
p.admonition-title,
p.system-message-title {
  font-weight: bold;
}
p.sidebar-title,
p.rubric {
  font-weight: bold;
  font-size: larger;
}
p.rubric {
  color: maroon;
}
p.subtitle,
p.section-subtitle,
p.sidebar-subtitle {
  font-weight: bold;
  margin-top: -0.5em;
}
h1 + p.subtitle {
  font-size: 1.6em;
}
a.toc-backref {
  color: inherit;
  text-decoration: none;
}

/* Warnings, Errors */
.system-messages h2,
.system-message-title,
span.problematic {
  color: red;
}

/* Inline Literals */
.docutils.literal {
  font-family: monospace;
  white-space: pre-wrap;
}
/* do not wrap at hyphens and similar: */
.literal > span.pre { white-space: nowrap; }

/* Lists */

/* compact and simple lists: no margin between items */
.simple  li, .simple  ul, .simple  ol,
.compact li, .compact ul, .compact ol,
.simple  > li p, dl.simple  > dd,
.compact > li p, dl.compact > dd {
  margin-top: 0;
  margin-bottom: 0;
}
/* Nested Paragraphs */
p:first-child { margin-top: 0; }
p:last-child { margin-bottom: 0; }
details > p:last-child { margin-bottom: 1em; }

/* Table of Contents */
.contents ul.auto-toc { /* section numbers present */
  list-style-type: none;
}

/* Enumerated Lists */
ol.arabic     { list-style: decimal }
ol.loweralpha { list-style: lower-alpha }
ol.upperalpha { list-style: upper-alpha }
ol.lowerroman { list-style: lower-roman }
ol.upperroman { list-style: upper-roman }

/* Definition Lists and Derivatives */
dt .classifier { font-style: italic }
dt .classifier:before {
  font-style: normal;
  margin: 0.5em;
  content: ":";
}
/* Field Lists and similar */
/* bold field name, content starts on the same line */
dl.field-list,
dl.option-list,
dl.docinfo {
  display: flow-root;
}
dl.field-list > dt,
dl.option-list > dt,
dl.docinfo > dt {
  font-weight: bold;
  clear: left;
  float: left;
  margin: 0;
  padding: 0;
  padding-right: 0.2em;
}
/* Offset for field content (corresponds to the --field-name-limit option) */
dl.field-list > dd,
dl.option-list > dd,
dl.docinfo > dd {
  margin-left:  9em; /* ca. 14 chars in the test examples, fit all Docinfo fields */
}
/* start nested lists on new line */
dd > dl:first-child,
dd > ul:first-child,
dd > ol:first-child {
  clear: left;
}
/* start field-body on a new line after long field names */
dl.field-list > dd > *:first-child,
dl.option-list > dd > *:first-child
{
  display: inline-block;
  width: 100%;
  margin: 0;
}

/* Bibliographic Fields (docinfo) */
dl.docinfo pre.address {
  font: inherit;
  margin: 0.5em 0;
}
dl.docinfo > dd.authors > p { margin: 0; }

/* Option Lists */
dl.option-list > dt { font-weight: normal; }
span.option { white-space: nowrap; }

/* Footnotes and Citations  */

.footnote, .citation { margin: 1em 0; } /* default paragraph skip (Firefox) */
/* hanging indent */
.citation { padding-left: 2em; }
.footnote { padding-left: 1.7em; }
.footnote.superscript { padding-left: 0.9em; }
.citation > .label { margin-left: -2em; }
.footnote > .label { margin-left: -1.7em; }
.footnote.superscript > .label { margin-left: -0.9em; }

.footnote > .label + *,
.citation > .label + * {
  display: inline-block;
  margin-top: 0;
  vertical-align: top;
}
.footnote > .backrefs + *,
.citation > .backrefs + * {
  margin-top: 0;
}
.footnote > .label + p, .footnote > .backrefs + p,
.citation > .label + p, .citation > .backrefs + p {
  display: inline;
  vertical-align: inherit;
}

.backrefs > a { font-style: italic; }

/* superscript footnotes */
a[role="doc-noteref"].superscript,
.footnote.superscript > .label,
.footnote.superscript > .backrefs {
  vertical-align: super;
  font-size: smaller;
  line-height: 1;
}
a[role="doc-noteref"].superscript > .fn-bracket,
.footnote.superscript > .label > .fn-bracket {
  /* hide brackets in display but leave for copy/paste */
  display: inline-block;
  width: 0;
  overflow: hidden;
}
[role="doc-noteref"].superscript + [role="doc-noteref"].superscript {
  padding-left: 0.15em; /* separate consecutive footnote references */
  /* TODO: unfortunately, "+" also selects with text between the references. */
}

/* Alignment */
.align-left   {
  text-align: left;
  margin-right: auto;
}
.align-center {
  text-align: center;
  margin-left: auto;
  margin-right: auto;
}
.align-right  {
  text-align: right;
  margin-left: auto;
}
.align-top    { vertical-align: top; }
.align-middle { vertical-align: middle; }
.align-bottom { vertical-align: bottom; }

/* reset inner alignment in figures and tables */
figure.align-left, figure.align-right,
table.align-left, table.align-center, table.align-right {
  text-align: inherit;
}

/* Text Blocks */
.topic { margin: 1em 2em; }
.sidebar,
.admonition,
.system-message {
  margin: 1em 2em;
  border: thin solid;
  padding: 0.5em 1em;
}
div.line-block { display: block; }
div.line-block div.line-block, pre { margin-left: 2em; }

/* Code line numbers: dropped when copying text from the page */
pre.code .ln { display: none; }
pre.code code:before {
  content: attr(data-lineno); /* …, none) fallback not supported by any browser */
  color: gray;
}

/* Tables */
table {
  border-collapse: collapse;
}
td, th {
  border: thin solid silver;
  padding: 0 1ex;
}
.borderless td, .borderless th {
  border: 0;
  padding: 0;
  padding-right: 0.5em /* separate table cells */
}

table > caption {
  text-align: left;
  margin-top: 0.2em;
  margin-bottom: 0.2em;
}
table.captionbelow {
  caption-side: bottom;
}

/* Document Header and Footer */
header { border-bottom: 1px solid black; }
footer { border-top: 1px solid black; }

/* Images are block-level by default in Docutils */
/* New HTML5 block elements: set display for older browsers */
img, header, footer, main, aside, nav, section, figure, video, details {
  display: block;
}
/* inline images */
p img, p video, figure img, figure video {
  display: inline;
}

</style>
<style type="text/css">

/* CSS31_ style sheet for the output of Docutils HTML writers.             */
/* Rules for easy reading and pre-defined style variants.                  */
/*                                                                         */
/* :Author: Günter Milde, based on html4css1.css by David Goodger          */
/* :Id: $Id: plain.css 8805 2021-08-10 14:13:35Z milde $                                                               */
/* :Copyright: © 2015 Günter Milde.                                        */
/* :License: Released under the terms of the `2-Clause BSD license`_,      */
/*    in short:                                                            */
/*                                                                         */
/*    Copying and distribution of this file, with or without modification, */
/*    are permitted in any medium without royalty provided the copyright   */
/*    notice and this notice are preserved.                                */
/*                                                                         */
/*    This file is offered as-is, without any warranty.                    */
/*                                                                         */
/* .. _2-Clause BSD license: http://www.spdx.org/licenses/BSD-2-Clause     */
/* .. _CSS3: http://www.w3.org/TR/CSS3                                     */


/* Document Structure */
/* ****************** */

/* "page layout" */
body {
  margin: 0;
  background-color: #dbdbdb;
  --field-indent: 9em; /* default indent of fields in field lists */
}
main, footer, header {
  line-height:1.6;
  /* avoid long lines --> better reading */
  /* optimum is 45…75 characters/line <http://webtypography.net/2.1.2> */
  /* OTOH: lines should not be too short because of missing hyphenation, */
  max-width: 50rem;
  padding: 1px 2%; /* 1px on top avoids grey bar above title (mozilla) */
  margin: auto;
}
main {
  counter-reset: table figure;
  background-color: white;
}
footer, header {
  font-size: smaller;
  padding: 0.5em 2%;
  border: none;
}

/* Table of Contents */
ul.auto-toc > li > p {
  padding-left: 1em;
  text-indent: -1em;
}
nav.contents ul {
  padding-left: 1em;
}
main > nav.contents ul ul ul ul:not(.auto-toc) {
  list-style-type: '\2B29\ ';
}
main > nav.contents ul ul ul ul ul:not(.auto-toc) {
  list-style-type: '\2B1D\ ';
}

/* Transitions */
hr.docutils {
  width: 80%;
  margin-top: 1em;
  margin-bottom: 1em;
  clear: both;
}

/* Paragraphs */

/* vertical space (parskip) */
p, ol, ul, dl, li,
div.line-block,
.footnote, .citation,
div > math,
table {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

h1, h2, h3, h4, h5, h6,
dd, details > p:last-child {
  margin-bottom: 0.5em;
}

/* Lists */
/* ===== */

/* Definition Lists */
/* Indent lists nested in definition lists */
dd > ul:only-child, dd > ol:only-child { padding-left: 1em; }

/* Description Lists */
/* styled like in most dictionaries, encyclopedias etc. */
dl.description {
  display: flow-root;
}
dl.description > dt {
  font-weight: bold;
  clear: left;
  float: left;
  margin: 0;
  padding: 0;
  padding-right: 0.3em;
}
dl.description > dd:after {
  display: table;
  content: "";
  clear: left; /* clearfix for empty descriptions */
}

/* Field Lists */

dl.field-list > dd,
dl.docinfo > dd {
  margin-left: var(--field-indent); /* adapted in media queries or HTML */
}

/* example for custom field-name width */
dl.field-list.narrow > dd {
  --field-indent: 5em;
}
/* run-in: start field-body on same line after long field names */
dl.field-list.run-in > dd p {
  display: block;
}

/* Bibliographic Fields */

/* generally, bibliographic fields use dl.docinfo */
/* but dedication and abstract are placed into divs */
div.abstract p.topic-title {
  text-align: center;
}
div.dedication {
  margin: 2em 5em;
  text-align: center;
  font-style: italic;
}
div.dedication p.topic-title {
  font-style: normal;
}

/* disclosures */
details { padding-left: 1em; }
summary { margin-left: -1em; }

/* Text Blocks */
/* =========== */

/* Literal Blocks */
pre.literal-block, pre.doctest-block,
pre.math, pre.code {
  font-family: monospace;
}

/* Block Quotes and Topics */
bockquote { margin: 1em 2em; }
blockquote p.attribution,
.topic p.attribution {
  text-align: right;
  margin-left: 20%;
}

/* Tables */
/* ====== */

/* th { vertical-align: bottom; } */

table tr { text-align: left; }

/* "booktabs" style (no vertical lines) */
table.booktabs {
  border: 0;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.booktabs * {
  border: 0;
}
table.booktabs th {
  border-bottom: thin solid;
}

/* numbered tables (counter defined in div.document) */
table.numbered > caption:before {
  counter-increment: table;
  content: "Table " counter(table) ": ";
  font-weight: bold;
}

/* Explicit Markup Blocks */
/* ====================== */

/* Footnotes and Citations */
/* ----------------------- */

/* line on the left */
.footnote {
  border-left: solid thin;
  padding-left: 2.1em;
  margin-bottom: 0;
}
.footnote + .footnote {
  padding-top: 0.5em;
  margin-top: 0;
}
.footnote.superscript {
  padding-left: 1.2em;
}

/* Directives */
/* ---------- */

/* Body Elements */
/* ~~~~~~~~~~~~~ */

/* Images and Figures */

/* let content flow to the side of aligned images and figures */
figure.align-left,
img.align-left,
video.align-left,
object.align-left {
  clear: left;
  float: left;
  margin-right: 1em;
}
figure.align-right,
img.align-right,
video.align-right,
object.align-right {
  clear: right;
  float: right;
  margin-left: 1em;
}
/* Stop floating sidebars, images and figures */
h1, h2, h3, h4, footer, header { clear: both; }

/* Numbered figures */
figure.numbered > figcaption > p:before {
  counter-increment: figure;
  content: "Figure " counter(figure) ": ";
  font-weight: bold;
}

/* Admonitions and System Messages */
.caution p.admonition-title,
.attention p.admonition-title,
.danger p.admonition-title,
.error p.admonition-title,
.warning p.admonition-title,
div.error {
  color: red;
}

/* Sidebar */
/* Move right. In a layout with fixed margins, */
/* it can be moved into the margin.            */
aside.sidebar {
  width: 30%;
  max-width: 26em;
  float: right;
  clear: right;
  margin-left: 1em;
  margin-right: -1%;
  background-color: #fffffa;
}


/* Code */
pre.code { padding: 0.7ex }
pre.code, code { background-color: #eeeeee }
/* basic highlighting: for a complete scheme, see */
/* http://docutils.sourceforge.net/sandbox/stylesheets/ */
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

/* Math */
/* for math-output=MathML (for math-output=HTML, see math.css) */
math .boldsymbol {
  font-weight: bold;
}
mstyle.mathscr, mi.mathscr {
  font-family: STIX;
}

/* Epigraph           */
/* Highlights         */
/* Pull-Quote         */
/* Compound Paragraph */
/* Container          */

/* Inline Markup */
/* ============= */

sup, sub { line-height: 0.8; } /* do not add leading for lines with sup/sub */

/* Inline Literals                                          */
/* possible values: normal, nowrap, pre, pre-wrap, pre-line */
/*   span.docutils.literal { white-space: pre-wrap; }       */

/* Hyperlink References */
a { text-decoration: none; }

/* External Targets       */
/*   span.target.external */
/* Internal Targets       */
/*   span.target.internal */
/* Footnote References    */
/*   a[role="doc-noteref"] */
/* Citation References    */
/*   a.citation-reference */

</style>
</head>
<body class="with-toc">
<main id="fetchmail">
<h1 class="title">FETCHMAIL</h1>
<dl class="docinfo simple">
<dt class="date">Date<span class="colon">:</span></dt>
<dd class="date">2022-07-16</dd>
</dl>
<nav class="contents" id="contents" role="doc-toc">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#name" id="toc-entry-1">NAME</a></p></li>
<li><p><a class="reference internal" href="#synopsis" id="toc-entry-2">SYNOPSIS</a></p></li>
<li><p><a class="reference internal" href="#description" id="toc-entry-3">DESCRIPTION</a></p></li>
<li><p><a class="reference internal" href="#support-troubleshooting" id="toc-entry-4">SUPPORT, TROUBLESHOOTING</a></p></li>
<li><p><a class="reference internal" href="#tls-ssl-quickstart" id="toc-entry-5">TLS (SSL) QUICKSTART</a></p></li>
<li><p><a class="reference internal" href="#concepts" id="toc-entry-6">CONCEPTS</a></p></li>
<li><p><a class="reference internal" href="#preface-on-this-manual" id="toc-entry-7">PREFACE ON THIS MANUAL</a></p></li>
<li><p><a class="reference internal" href="#general-operation" id="toc-entry-8">GENERAL OPERATION</a></p>
<ul>
<li><p><a class="reference internal" href="#general-options" id="toc-entry-9">General Options</a></p></li>
<li><p><a class="reference internal" href="#disposal-options" id="toc-entry-10">Disposal Options</a></p></li>
<li><p><a class="reference internal" href="#protocol-and-query-options" id="toc-entry-11">Protocol and Query Options</a></p></li>
<li><p><a class="reference internal" href="#delivery-control-options" id="toc-entry-12">Delivery Control Options</a></p></li>
<li><p><a class="reference internal" href="#resource-limit-control-options" id="toc-entry-13">Resource Limit Control Options</a></p></li>
<li><p><a class="reference internal" href="#authentication-options" id="toc-entry-14">Authentication Options</a></p></li>
<li><p><a class="reference internal" href="#miscellaneous-options" id="toc-entry-15">Miscellaneous Options</a></p></li>
<li><p><a class="reference internal" href="#removed-options" id="toc-entry-16">Removed Options</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#user-authentication-and-encryption" id="toc-entry-17">USER AUTHENTICATION AND ENCRYPTION</a></p>
<ul>
<li><p><a class="reference internal" href="#using-netrc-files" id="toc-entry-18">Using netrc files</a></p></li>
<li><p><a class="reference internal" href="#secure-socket-layers-ssl-and-transport-layer-security-tls" id="toc-entry-19">Secure Socket Layers (SSL) and Transport Layer Security (TLS)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#pop3-variants" id="toc-entry-20">POP3 VARIANTS</a></p>
<ul>
<li><p><a class="reference internal" href="#retr-or-top" id="toc-entry-21">RETR or TOP</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#alternate-authentication-forms-methods" id="toc-entry-22">ALTERNATE AUTHENTICATION FORMS/METHODS</a></p>
<ul>
<li><p><a class="reference internal" href="#esmtp-auth" id="toc-entry-23">ESMTP AUTH</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#daemon-mode" id="toc-entry-24">DAEMON MODE</a></p>
<ul>
<li><p><a class="reference internal" href="#introducing-the-daemon-mode" id="toc-entry-25">Introducing the daemon mode</a></p></li>
<li><p><a class="reference internal" href="#starting-the-daemon-mode" id="toc-entry-26">Starting the daemon mode</a></p></li>
<li><p><a class="reference internal" href="#awakening-the-background-daemon" id="toc-entry-27">Awakening the background daemon</a></p></li>
<li><p><a class="reference internal" href="#terminating-the-background-daemon" id="toc-entry-28">Terminating the background daemon</a></p></li>
<li><p><a class="reference internal" href="#useful-options-for-daemon-mode" id="toc-entry-29">Useful options for daemon mode</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#administrative-options" id="toc-entry-30">ADMINISTRATIVE OPTIONS</a></p></li>
<li><p><a class="reference internal" href="#retrieval-failure-modes" id="toc-entry-31">RETRIEVAL FAILURE MODES</a></p></li>
<li><p><a class="reference internal" href="#spam-filtering" id="toc-entry-32">SPAM FILTERING</a></p></li>
<li><p><a class="reference internal" href="#smtp-esmtp-error-handling" id="toc-entry-33">SMTP/ESMTP ERROR HANDLING</a></p></li>
<li><p><a class="reference internal" href="#the-run-control-file" id="toc-entry-34">THE RUN CONTROL FILE</a></p>
<ul>
<li><p><a class="reference internal" href="#run-control-syntax" id="toc-entry-35">Run Control Syntax</a></p></li>
<li><p><a class="reference internal" href="#poll-versus-skip" id="toc-entry-36">Poll versus Skip</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#keyword-option-summary" id="toc-entry-37">KEYWORD/OPTION SUMMARY</a></p>
<ul>
<li><p><a class="reference internal" href="#keywords-not-corresponding-to-option-switches" id="toc-entry-38">Keywords Not Corresponding To Option Switches</a></p></li>
<li><p><a class="reference internal" href="#singledrop-versus-multidrop-options" id="toc-entry-39">Singledrop versus Multidrop options</a></p></li>
<li><p><a class="reference internal" href="#miscellaneous-run-control-options" id="toc-entry-40">Miscellaneous Run Control Options</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#debugging-fetchmail" id="toc-entry-41">DEBUGGING FETCHMAIL</a></p>
<ul>
<li><p><a class="reference internal" href="#fetchmail-crashing" id="toc-entry-42">Fetchmail crashing</a></p></li>
<li><p><a class="reference internal" href="#enabling-fetchmail-core-dumps" id="toc-entry-43">Enabling fetchmail core dumps</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#interaction-with-rfc-822" id="toc-entry-44">INTERACTION WITH RFC 822</a></p></li>
<li><p><a class="reference internal" href="#configuration-examples" id="toc-entry-45">CONFIGURATION EXAMPLES</a></p></li>
<li><p><a class="reference internal" href="#the-use-and-abuse-of-multidrop-mailboxes" id="toc-entry-46">THE USE AND ABUSE OF MULTIDROP MAILBOXES</a></p>
<ul>
<li><p><a class="reference internal" href="#header-versus-envelope-addresses" id="toc-entry-47">Header versus Envelope addresses</a></p></li>
<li><p><a class="reference internal" href="#good-ways-to-use-multidrop-mailboxes" id="toc-entry-48">Good Ways To Use Multidrop Mailboxes</a></p></li>
<li><p><a class="reference internal" href="#bad-ways-to-abuse-multidrop-mailboxes" id="toc-entry-49">Bad Ways To Abuse Multidrop Mailboxes</a></p></li>
<li><p><a class="reference internal" href="#speeding-up-multidrop-checking" id="toc-entry-50">Speeding Up Multidrop Checking</a></p></li>
<li><p><a class="reference internal" href="#duplicate-suppression-on-multidrop" id="toc-entry-51">Duplicate suppression on multidrop</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#socks" id="toc-entry-52">SOCKS</a></p></li>
<li><p><a class="reference internal" href="#exit-codes" id="toc-entry-53">EXIT CODES</a></p></li>
<li><p><a class="reference internal" href="#files" id="toc-entry-54">FILES</a></p></li>
<li><p><a class="reference internal" href="#environment" id="toc-entry-55">ENVIRONMENT</a></p></li>
<li><p><a class="reference internal" href="#signals" id="toc-entry-56">SIGNALS</a></p></li>
<li><p><a class="reference internal" href="#bugs-limitations-and-known-problems" id="toc-entry-57">BUGS, LIMITATIONS, AND KNOWN PROBLEMS</a></p></li>
<li><p><a class="reference internal" href="#author" id="toc-entry-58">AUTHOR</a></p></li>
<li><p><a class="reference internal" href="#see-also" id="toc-entry-59">SEE ALSO</a></p></li>
<li><p><a class="reference internal" href="#applicable-standards" id="toc-entry-60">APPLICABLE STANDARDS</a></p></li>
</ul>
</nav>
<section id="name">
<h2><a class="toc-backref" href="#toc-entry-1" role="doc-backlink">NAME</a></h2>
<p>fetchmail - fetch mail from a POP, IMAP, ETRN, or ODMR-capable server</p>
</section>
<section id="synopsis">
<h2><a class="toc-backref" href="#toc-entry-2" role="doc-backlink">SYNOPSIS</a></h2>
<div class="line-block">
<div class="line"><strong>fetchmail</strong> [<em>option...</em>] [<em>mailserver...</em>]</div>
<div class="line"><strong>fetchmailconf</strong></div>
</div>
</section>
<section id="description">
<h2><a class="toc-backref" href="#toc-entry-3" role="doc-backlink">DESCRIPTION</a></h2>
<p><strong>fetchmail</strong> is a mail-retrieval and forwarding utility; it fetches
mail from remote mail servers and forwards it to your local (client)
machine's delivery system. You can then handle the retrieved mail using
normal mail user agents such as <strong>mutt</strong>(1), <strong>elm</strong>(1) or
<strong>Mail</strong>(1). The <strong>fetchmail</strong> utility can be run in a daemon mode to
repeatedly poll one or more systems at a specified interval.</p>
<p>The <strong>fetchmail</strong> program can gather mail from servers supporting any of
the common mail-retrieval protocols: POP2 (legacy, to be removed from
future release), POP3, IMAP2bis, IMAP4, and IMAP4rev1. It can also use
the ESMTP ETRN extension and ODMR. (The RFCs describing all these
protocols are listed at the end of this manual page.)</p>
<p>While <strong>fetchmail</strong> is primarily intended to be used over on-demand
TCP/IP links (such as SLIP or PPP connections), it may also be useful as
a message transfer agent for sites which refuse for security reasons to
permit (sender-initiated) SMTP transactions with sendmail.</p>
</section>
<section id="support-troubleshooting">
<h2><a class="toc-backref" href="#toc-entry-4" role="doc-backlink">SUPPORT, TROUBLESHOOTING</a></h2>
<p>For troubleshooting, tracing and debugging, you need to increase
fetchmail's verbosity to actually see what happens. To do that, please
run <strong>both of the two following commands,</strong> adding all of the options
you'd normally use.</p>
<pre class="literal-block">env LC_ALL=C fetchmail -V -v --nodetach --nosyslog</pre>
<blockquote>
<p>(This command line prints in English how fetchmail understands your
configuration.)</p>
</blockquote>
<pre class="literal-block">env LC_ALL=C fetchmail -vvv  --nodetach --nosyslog</pre>
<blockquote>
<p>(This command line actually runs fetchmail with verbose English
output.)</p>
</blockquote>
<p>Also see <a class="reference external" href="https://fetchmail.sourceforge.io/fetchmail-FAQ.html#G3">item #G3 in fetchmail's
FAQ</a>.</p>
<p>You can omit the LC_ALL=C part above if you want output in the local
language (if supported). However if you are posting to mailing lists,
please leave it in. The maintainers do not necessarily understand your
language, please use English.</p>
</section>
<section id="tls-ssl-quickstart">
<h2><a class="toc-backref" href="#toc-entry-5" role="doc-backlink">TLS (SSL) QUICKSTART</a></h2>
<p>Your fetchmail distribution should have come with a README.SSL file,
which see. It is recommended to configure all polls with --ssl
--sslproto tls1.2+ if supported by the server, which configures
fetchmail along recent IETF proposed standards and best current
practices, <a class="reference external" href="http://tools.ietf.org/html/rfc8314.html">RFC-8314</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc8996.html">RFC-8996</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc8997.html">RFC-8997</a>.</p>
</section>
<section id="concepts">
<h2><a class="toc-backref" href="#toc-entry-6" role="doc-backlink">CONCEPTS</a></h2>
<p>If <strong>fetchmail</strong> is used with a POP or an IMAP server (but not with ETRN
or ODMR), it has two fundamental modes of operation for each user
account from which it retrieves mail: <em>singledrop</em>- and
<em>multidrop</em>-mode.</p>
<dl>
<dt>In singledrop-mode,</dt>
<dd><p><strong>fetchmail</strong> assumes that all messages in the user's account
(mailbox) are intended for a single recipient. The identity of the
recipient will either default to the local user currently executing
<strong>fetchmail</strong>, or will need to be explicitly specified in the
configuration file.</p>
<p><strong>fetchmail</strong> uses singledrop-mode when the fetchmailrc configuration
contains at most a single local user specification for a given server
account.</p>
</dd>
<dt>In multidrop-mode,</dt>
<dd><p><strong>fetchmail</strong> assumes that the mail server account actually contains
mail intended for any number of different recipients. Therefore,
<strong>fetchmail</strong> must attempt to deduce the proper &quot;envelope recipient&quot;
from the mail headers of each message. In this mode of operation,
<strong>fetchmail</strong> almost resembles a mail transfer agent (MTA).</p>
<p>Note that neither the POP nor IMAP protocols were intended for use in
this fashion, and hence envelope information is often not directly
available. The ISP must store the envelope information in some
message header <strong>and</strong>. The ISP must also store one copy of the
message per recipient. If either of the conditions is not fulfilled,
this process is unreliable, because <strong>fetchmail</strong> must then resort to
guessing the true envelope recipient(s) of a message. This usually
fails for mailing list messages and Bcc:d mail, or mail for multiple
recipients in your domain.</p>
<p><strong>fetchmail</strong> uses multidrop-mode when more than one local user
and/or a wildcard is specified for a particular server account in the
configuration file.</p>
</dd>
<dt>In ETRN and ODMR modes,</dt>
<dd><p>these considerations do not apply, as these protocols are based on
SMTP, which provides explicit envelope recipient information. These
protocols always support multiple recipients.</p>
</dd>
</dl>
<p>As each message is retrieved, <strong>fetchmail</strong> normally delivers it via
SMTP to port 25 on the machine it is running on (localhost), just as
though it were being passed in over a normal TCP/IP link. <strong>fetchmail</strong>
provides the SMTP server with an envelope recipient derived in the
manner described previously. The mail will then be delivered according
to your MTA's rules (the Mail Transfer Agent is usually
<strong>sendmail</strong>(8), <strong>exim</strong>(8), or <strong>postfix</strong>(8)). Invoking your
system's MDA (Mail Delivery Agent) is the duty of your MTA. All the
delivery-control mechanisms (such as <em>.forward</em> files) normally
available through your system MTA and local delivery agents will
therefore be applied as usual.</p>
<p>If your fetchmail configuration sets a local MDA (see the --mda option),
it will be used directly instead of talking SMTP to port 25.</p>
<p>If the program <strong>fetchmailconf</strong> is available, it will assist you in
setting up and editing a fetchmailrc configuration. It runs under the X
window system and requires that the language Python and the Tk toolkit
(with Python bindings) be present on your system. If you are first
setting up fetchmail for single-user mode, it is recommended that you
use Novice mode. Expert mode provides complete control of fetchmail
configuration, including the multidrop features. In either case, the
'Autoprobe' button will tell you the most capable protocol a given mail
server supports, and warn you of potential problems with that server.</p>
</section>
<section id="preface-on-this-manual">
<h2><a class="toc-backref" href="#toc-entry-7" role="doc-backlink">PREFACE ON THIS MANUAL</a></h2>
<p>Fetchmail's run-time strings have been translated (localized) to some
languages, but the manual is only available in English. In some
situations, for comparing output to manual, it may be helpful to switch
fetchmail to English output by overriding the locale variables, for
instance:</p>
<pre class="literal-block">env LC_ALL=C fetchmail # add other options before the hash</pre>
<pre class="literal-block">env LANG=en fetchmail # other options before the hash</pre>
<p>or similar. Details vary by operating system.</p>
</section>
<section id="general-operation">
<h2><a class="toc-backref" href="#toc-entry-8" role="doc-backlink">GENERAL OPERATION</a></h2>
<p>The behavior of <strong>fetchmail</strong> is controlled by command-line options and
a run control file, <em>~/.fetchmailrc</em>, the syntax of which we describe in
a later section (this file is what the <strong>fetchmailconf</strong> program edits).
Command-line options override <em>~/.fetchmailrc</em> declarations.</p>
<p>Each server name that you specify following the options on the command
line will be queried. If you do not specify any servers on the command
line, each 'poll' entry in your <em>~/.fetchmailrc</em> file will be queried,
unless the idle option is used, which see.</p>
<p>To facilitate the use of <strong>fetchmail</strong> in scripts and pipelines, it
returns an appropriate exit code upon termination -- see EXIT CODES
below.</p>
<p>The following options modify the behavior of <strong>fetchmail</strong>. It is seldom
necessary to specify any of these once you have a working <em>.fetchmailrc</em>
file set up.</p>
<p>Almost all options have a corresponding keyword which can be used to
declare them in a <em>.fetchmailrc</em> file.</p>
<p>Some special options are not covered here, but are documented instead in
sections on AUTHENTICATION and DAEMON MODE which follow.</p>
<section id="general-options">
<h3><a class="toc-backref" href="#toc-entry-9" role="doc-backlink">General Options</a></h3>
<dl>
<dt><strong>-? | --help</strong></dt>
<dd><p>Displays option help.</p>
</dd>
<dt><strong>-V | --version</strong></dt>
<dd><p>Displays the version information for your copy of <strong>fetchmail</strong>. No
mail fetch is performed. Instead, for each server specified, all the
option information that would be computed if <strong>fetchmail</strong> were
connecting to that server is displayed. Any non-printable characters
in passwords or other string names are shown as back-slashed C-like
escape sequences. This option is useful for verifying that your
options are set the way you want them.</p>
</dd>
<dt><strong>-c | --check</strong></dt>
<dd><p>Return a status code to indicate whether there is mail waiting,
without actually fetching or deleting mail (see EXIT CODES below).
This option turns off daemon mode (in which it would be useless). It
does not play well with queries to multiple sites, and does not work
with ETRN or ODMR. It will return a false positive if you leave read
but undeleted mail in your server mailbox and your fetch protocol
cannot tell kept messages from new ones. This means it will work with
IMAP, not work with POP2, and may occasionally flake out under POP3.</p>
</dd>
<dt><strong>-s | --silent</strong></dt>
<dd><p>Silent mode. Suppresses all progress/status messages that are
normally echoed to standard output during a fetch (but does not
suppress actual error messages). The --verbose option overrides this.</p>
</dd>
<dt><strong>-v | --verbose</strong></dt>
<dd><p>Verbose mode. All control messages passed between <strong>fetchmail</strong> and
the mail server are echoed to stdout. Overrides --silent. Doubling
this option (-v -v) causes extra diagnostic information to be
printed.</p>
</dd>
<dt><strong>--nosoftbounce</strong></dt>
<dd><div class="line-block">
<div class="line">(since v6.3.10, Keyword: set no softbounce, since v6.3.10)</div>
<div class="line">Hard bounce mode. All permanent delivery errors cause messages to
be deleted from the upstream server, see &quot;no softbounce&quot; below.</div>
</div>
</dd>
<dt><strong>--softbounce</strong></dt>
<dd><div class="line-block">
<div class="line">(since v6.3.10, Keyword: set softbounce, since v6.3.10)</div>
<div class="line">Soft bounce mode. All permanent delivery errors cause messages to
be left on the upstream server if the protocol supports that.
<strong>This option is on by default to match historic fetchmail
documentation,</strong> and will be changed to hard bounce mode in the
next fetchmail release.</div>
</div>
</dd>
</dl>
</section>
<section id="disposal-options">
<h3><a class="toc-backref" href="#toc-entry-10" role="doc-backlink">Disposal Options</a></h3>
<dl>
<dt><strong>-a | --all | (since v6.3.3) --fetchall</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: fetchall, since v3.0)</div>
<div class="line">Retrieve both old (seen) and new messages from the mail server. The
default is to fetch only messages the server has not marked seen.
Under POP3, this option also forces the use of RETR rather than
TOP. Note that POP2 retrieval behaves as though --all is always on
(see RETRIEVAL FAILURE MODES below) and this option does not work
with ETRN or ODMR. While the -a and --all command-line and fetchall
rcfile options have been supported for a long time, the --fetchall
command-line option was added in v6.3.3.</div>
</div>
</dd>
<dt><strong>-k | --keep</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: keep)</div>
<div class="line">Keep retrieved messages on the remote mail server. Normally,
messages are deleted from the folder on the mail server after they
have been retrieved. Specifying the <strong>keep</strong> option causes
retrieved messages to remain in your folder on the mail server.
This option does not work with ETRN or ODMR. If used with POP3, it
is recommended to also specify the --uidl option or uidl keyword.</div>
</div>
</dd>
<dt><strong>-K | --nokeep</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: nokeep)</div>
<div class="line">Delete retrieved messages from the remote mail server. This option
forces retrieved mail to be deleted. It may be useful if you have
specified a default of <strong>keep</strong> in your <em>.fetchmailrc</em>. This option
is forced on with ETRN and ODMR.</div>
</div>
</dd>
<dt><strong>-F | --flush</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: flush)</div>
<div class="line">POP3/IMAP only. This is a dangerous option and can cause mail loss
when used improperly. It deletes old (seen) messages from the mail
server before retrieving new messages. <strong>Warning:</strong> This can cause
mail loss if you check your mail with other clients than fetchmail,
and cause fetchmail to delete a message it had never fetched
before. It can also cause mail loss if the mail server marks the
message seen after retrieval (IMAP2 servers). You should probably
not use this option in your configuration file. If you use it with
POP3, you must use the 'uidl' option. What you probably want is the
default setting: if you do not specify '-k', then fetchmail will
automatically delete messages after successful delivery.</div>
</div>
</dd>
<dt><strong>--limitflush</strong></dt>
<dd><p>POP3/IMAP only, since version 6.3.0. Delete oversized messages from
the mail server before retrieving new messages. The size limit should
be separately specified with the --limit option. This option does not
work with ETRN or ODMR.</p>
</dd>
</dl>
</section>
<section id="protocol-and-query-options">
<h3><a class="toc-backref" href="#toc-entry-11" role="doc-backlink">Protocol and Query Options</a></h3>
<dl>
<dt><strong>-p &lt;proto&gt; | --proto &lt;proto&gt; | --protocol &lt;proto&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: proto[col])</div>
<div class="line">Specify the protocol to use when communicating with the remote mail
server. If no protocol is specified, the default is AUTO. <strong>proto</strong>
may be one of the following:</div>
</div>
<dl class="simple">
<dt>AUTO</dt>
<dd><p>Tries IMAP, POP3, and POP2 (skipping any of these for which
support has not been compiled in).</p>
</dd>
<dt>POP2</dt>
<dd><p>Post Office Protocol 2 (legacy, to be removed from future release)</p>
</dd>
<dt>POP3</dt>
<dd><p>Post Office Protocol 3</p>
</dd>
<dt>APOP</dt>
<dd><p>Use POP3 with old-fashioned MD5-challenge authentication.
Considered not resistant to man-in-the-middle attacks.</p>
</dd>
<dt>RPOP</dt>
<dd><p>Use POP3 with RPOP authentication.</p>
</dd>
<dt>KPOP</dt>
<dd><p>Use POP3 with Kerberos V4 authentication on port 1109.</p>
</dd>
<dt>SDPS</dt>
<dd><p>Use POP3 with Demon Internet's SDPS extensions.</p>
</dd>
<dt>IMAP</dt>
<dd><p>IMAP2bis, IMAP4, or IMAP4rev1 (<strong>fetchmail</strong> automatically detects
their capabilities).</p>
</dd>
<dt>ETRN</dt>
<dd><p>Use the ESMTP ETRN option.</p>
</dd>
<dt>ODMR</dt>
<dd><p>Use the On-Demand Mail Relay ESMTP profile.</p>
</dd>
</dl>
</dd>
</dl>
<p>All these alternatives work in basically the same way (communicating
with standard server daemons to fetch mail already delivered to a
mailbox on the server) except ETRN and ODMR. The ETRN mode allows you to
ask a compliant ESMTP server (such as BSD sendmail at release 8.8.0 or
higher) to immediately open a sender-SMTP connection to your client
machine and begin forwarding any items addressed to your client machine
in the server's queue of undelivered mail. The ODMR mode requires an
ODMR-capable server and works similarly to ETRN, except that it does not
require the client machine to have a static DNS.</p>
<dl>
<dt><strong>-U | --uidl</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: uidl)</div>
<div class="line">Force UIDL use (effective only with POP3). Force client-side
tracking of 'newness' of messages (UIDL stands for &quot;unique ID
listing&quot; and is described in <a class="reference external" href="http://tools.ietf.org/html/rfc1939.html">RFC1939</a>). Use with 'keep' to use a
mailbox as a baby news drop for a group of users. The fact that
seen messages are skipped is logged, unless error logging is done
through syslog while running in daemon mode. Note that fetchmail
may automatically enable this option depending on upstream server
capabilities. Note also that this option may be removed and forced
enabled in a future fetchmail version. See also: --idfile.</div>
</div>
</dd>
<dt><strong>--idle (since 6.3.3)</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: idle, since before 6.0.0)</div>
<div class="line">Enable IDLE use (effective only with IMAP). Note that this works
with only one account and one folder at a given time, other folders
or accounts will not be polled when idle is in effect! While the
idle rcfile keyword had been supported for a long time, the --idle
command-line option was added in version 6.3.3. IDLE use means that
fetchmail tells the IMAP server to send notice of new messages, so
they can be retrieved sooner than would be possible with regular
polls.</div>
</div>
</dd>
<dt><strong>-P &lt;portnumber&gt; | --service &lt;servicename&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: service) Since version 6.3.0.</div>
<div class="line">The service option permits you to specify a service name to connect
to. You can specify a decimal port number here, if your services
database lacks the required service-port assignments. See the FAQ
item R12 and the --ssl documentation for details. This replaces the
older --port option.</div>
</div>
</dd>
</dl>
<p>Note that this does not magically switch between TLS-wrapped and
STARTTLS modes, if you specify a port number or service name here that
is TLS-wrapped, meaning it starts to negotiate TLS before sending
application data in the clear, you may need to specify --ssl on the
command line or ssl in your rcfile.</p>
<dl>
<dt><strong>--port &lt;portnumber&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: port)</div>
<div class="line">Obsolete version of --service that does not take service names.
<strong>Note:</strong> this option may be removed from a future version.</div>
</div>
</dd>
<dt><strong>--principal &lt;principal&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: principal)</div>
<div class="line">The principal option permits you to specify a service principal for
mutual authentication. This is applicable to POP3 or IMAP with
Kerberos 4 authentication only. It does not apply to Kerberos 5 or
GSSAPI. This option may be removed in a future fetchmail version.</div>
</div>
</dd>
<dt><strong>-t &lt;seconds&gt; | --timeout &lt;seconds&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: timeout)</div>
<div class="line">The timeout option allows you to set a server-non-response timeout
in seconds. If a mail server does not send a greeting message or
respond to commands for the given number of seconds, <strong>fetchmail</strong>
will drop the connection to it. Without such a timeout
<strong>fetchmail</strong> might hang until the TCP connection times out, trying
to fetch mail from a down host, which may be very long. This would
be particularly annoying for a <strong>fetchmail</strong> running in the
background. There is a default timeout which fetchmail -V will
report. If a given connection receives too many timeouts in
succession, fetchmail will consider it wedged and stop retrying.
The calling user will be notified by email if this happens.</div>
</div>
<p>Beginning with fetchmail 6.3.10, the SMTP client uses the recommended
minimum timeouts from <a class="reference external" href="http://tools.ietf.org/html/rfc5321.html">RFC-5321</a> while waiting for the SMTP/LMTP server
it is talking to. You can raise the timeouts even more, but you
cannot shorten them. This is to avoid a painful situation where
fetchmail has been configured with a short timeout (a minute or
less), ships a long message (many MBytes) to the local MTA, which
then takes longer than timeout to respond &quot;OK&quot;, which it eventually
will; that would mean the mail gets delivered properly, but fetchmail
cannot notice it and will thus re-fetch this big message over and
over again.</p>
</dd>
<dt><strong>--plugin &lt;command&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: plugin)</div>
<div class="line">The plugin option allows you to use an external program to
establish the TCP connection. This is useful if you want to use
ssh, or need some special firewall setup. The program will be
looked up in $PATH and can optionally be passed the host name and
port as arguments using &quot;%h&quot; and &quot;%p&quot; respectively (note that the
interpolation logic is rather primitive, and these tokens must be
bounded by whitespace or beginning of string or end of string).
Fetchmail will write to the plugin's stdin and read from the
plugin's stdout.</div>
</div>
</dd>
<dt><strong>--plugout &lt;command&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: plugout)</div>
<div class="line">Identical to the plugin option above, but this one is used for the
SMTP connections.</div>
</div>
</dd>
<dt><strong>-r &lt;name&gt; | --folder &lt;name&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: folder[s])</div>
<div class="line">Causes a specified non-default mail folder on the mail server (or
comma-separated list of folders) to be retrieved. The syntax of the
folder name is server-dependent. This option is not available under
POP3, ETRN, or ODMR.</div>
</div>
</dd>
<dt><strong>--tracepolls</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: tracepolls)</div>
<div class="line">Tell fetchmail to poll trace information in the form 'polling
account %s' and 'folder %s' to the Received line it generates,
where the %s parts are replaced by the user's remote name, the poll
label, and the folder (mailbox) where available (the Received
header also normally includes the server's true name). This can be
used to facilitate mail filtering based on the account it is being
received from. The folder information is written only since version
6.3.4.</div>
</div>
</dd>
<dt><strong>--ssl</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: ssl)</div>
<div class="line">Causes the connection to the mail server to be encrypted via SSL,
by negotiating SSL directly after connecting (called SSL-wrapped
mode, or Implicit TLS by <a class="reference external" href="http://tools.ietf.org/html/rfc8314.html">RFC-8314</a>). Please see the description of
--sslproto below! More information is available in the <em>README.SSL</em>
file that ships with fetchmail.</div>
</div>
<p>Note that even if this option is omitted, fetchmail may still
negotiate SSL in-band for POP3 or IMAP, through the STLS or STARTTLS
feature. You can use the --sslproto option to modify that behavior.</p>
<p>If no port is specified, the connection is attempted to the well
known port of the SSL version of the base protocol. This is generally
a different port than the port used by the base protocol. For IMAP,
this is port 143 for the clear protocol and port 993 for the SSL
secured protocol; for POP3, it is port 110 for the clear text and
port 995 for the encrypted variant.</p>
<p>If your system lacks the corresponding entries from /etc/services,
see the --service option and specify the numeric port number as given
in the previous paragraph (unless your ISP had directed you to
different ports, which is uncommon however).</p>
</dd>
<dt><strong>--sslcert &lt;name&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: sslcert)</div>
<div class="line">For certificate-based client authentication. Some SSL encrypted
servers require client side keys and certificates for
authentication. In most cases, this is optional. This specifies the
location of the public key certificate to be presented to the
server at the time the SSL session is established. It is not
required (but may be provided) if the server does not require it.
It may be the same file as the private key (combined key and
certificate file) but this is not recommended. Also see --sslkey
below.</div>
</div>
</dd>
</dl>
<p><strong>NOTE:</strong> If you use client authentication, the user name is fetched
from the certificate's CommonName and overrides the name set with
--user.</p>
<dl>
<dt><strong>--sslkey &lt;name&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: sslkey)</div>
<div class="line">Specifies the file name of the client side private SSL key. Some
SSL encrypted servers require client side keys and certificates for
authentication. In most cases, this is optional. This specifies the
location of the private key used to sign transactions with the
server at the time the SSL session is established. It is not
required (but may be provided) if the server does not require it.
It may be the same file as the public key (combined key and
certificate file) but this is not recommended.</div>
</div>
<p>If a password is required to unlock the key, it will be prompted for
at the time just prior to establishing the session to the server.
This can cause some complications in daemon mode.</p>
<p>Also see --sslcert above.</p>
</dd>
<dt><strong>--sslproto &lt;value&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: sslproto, NOTE: semantic changes since v6.4.0)</div>
<div class="line">This option has a dual use, out of historic fetchmail behaviour. It
controls both the SSL/TLS protocol version and, if --ssl is not
specified, the STARTTLS behaviour (upgrading the protocol to an SSL
or TLS connection in-band). Some other options may however make TLS
mandatory.</div>
</div>
<p>Only if this option and --ssl are both missing for a poll, there will
be opportunistic TLS for POP3 and IMAP, where fetchmail will attempt
to upgrade to TLSv1 or newer.</p>
<p>Recognized values for --sslproto are given below. You should normally
choose one of the auto-negotiating options, i. e. '<strong>tls1.2+</strong>' or
'<strong>auto</strong>' or one of the other options ending in a plus (<strong>+</strong>)
character. Note that depending on OpenSSL library version and
configuration, some options cause run-time errors because the
requested SSL or TLS versions are not supported by the particular
installed OpenSSL library.</p>
<dl class="simple">
<dt>'TLS1.2+'</dt>
<dd><p>(recommended). Since v6.4.0. Require TLS. Auto-negotiate TLSv1.2
or newer.</p>
</dd>
<dt>'auto'</dt>
<dd><p>(default). Since v6.4.0. Require TLS. Auto-negotiate TLSv1 or
newer, disable SSLv3 downgrade. (fetchmail 6.3.26 and older have
auto-negotiated all protocols that their OpenSSL library
supported, including the broken SSLv3).</p>
</dd>
<dt>'', the empty string</dt>
<dd><p>Disable STARTTLS. If --ssl is given for the same server, log an
error and pretend that '<strong>auto</strong>' had been used instead.</p>
</dd>
<dt>'SSL23'</dt>
<dd><p>see '<strong>auto</strong>'.</p>
</dd>
<dt>'SSL3'</dt>
<dd><p>Require SSLv3 exactly. SSLv3 is broken, not supported on all
systems, avoid it if possible. This will make fetchmail negotiate
SSLv3 only, and is the only way besides '<strong>SSL3+</strong>' to have
fetchmail 6.4.0 or newer permit SSLv3.</p>
</dd>
<dt>'SSL3+'</dt>
<dd><p>same as '<strong>auto</strong>', but permit SSLv3 as well. This is the only way
besides '<strong>SSL3</strong>' to have fetchmail 6.4.0 or newer permit SSLv3.</p>
</dd>
<dt>'TLS1'</dt>
<dd><p>Require TLSv1. This does not negotiate TLSv1.1 or newer, and is
discouraged. Replace by TLS1+ unless the latter chokes your
server.</p>
</dd>
<dt>'TLS1+'</dt>
<dd><p>Since v6.4.0. See '<strong>auto</strong>'.</p>
</dd>
<dt>'TLS1.1'</dt>
<dd><p>Since v6.4.0. Require TLS v1.1 exactly.</p>
</dd>
<dt>'TLS1.1+'</dt>
<dd><p>Since v6.4.0. Require TLS. Auto-negotiate TLSv1.1 or newer.</p>
</dd>
<dt>'TLS1.2'</dt>
<dd><p>Since v6.4.0. Require TLS v1.2 exactly.</p>
</dd>
<dt>'TLS1.3'</dt>
<dd><p>Since v6.4.0. Require TLS v1.3 exactly.</p>
</dd>
<dt>'TLS1.3+'</dt>
<dd><p>Since v6.4.0. Require TLS. Auto-negotiate TLSv1.3 or newer.</p>
</dd>
<dt>Unrecognized parameters</dt>
<dd><p>are treated the same as '<strong>auto</strong>'.</p>
</dd>
</dl>
<p>NOTE: you should hardly ever need to use anything other than '' (to
force an unencrypted connection) or 'auto' (to enforce TLS).</p>
</dd>
<dt><strong>--sslcertck</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: sslcertck, default enabled since v6.4.0)</div>
<div class="line"><strong>--sslcertck causes fetchmail to require that SSL/TLS be used
and</strong> disconnect unless it can successfully negotiate SSL or TLS,
or if it cannot successfully verify and validate the certificate
and follow it to a trust anchor (or trusted root certificate). The
trust anchors are given as a set of local trusted certificates (see
the <strong>sslcertfile</strong> and <strong>sslcertpath</strong> options). If the server
certificate cannot be obtained or is not signed by one of the
trusted ones (directly or indirectly), fetchmail will disconnect,
regardless of the <strong>sslfingerprint</strong> option.</div>
</div>
</dd>
<dt><strong>--nosslcertck</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: no sslcertck, only in v6.4.X)</div>
<div class="line">The opposite of --sslcertck, this is a discouraged option. It
permits fetchmail to continue connecting even if the server
certificate failed the verification checks. Should only be used
together with --sslfingerprint.</div>
</div>
</dd>
<dt><strong>--sslcertfile &lt;file&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: sslcertfile, since v6.3.17)</div>
<div class="line">Sets the file fetchmail uses to look up local certificates. The
default is empty. This can be given in addition to
<strong>--sslcertpath</strong> below, and certificates specified in
<strong>--sslcertfile</strong> will be processed before those in
<strong>--sslcertpath</strong>. The option can be used in addition to
<strong>--sslcertpath</strong>.</div>
</div>
<p>The file is a text file. It contains the concatenation of trusted CA
certificates in PEM format.</p>
<p>Note that using this option will suppress loading the default SSL
trusted CA certificates file unless you set the environment variable
<strong>FETCHMAIL_INCLUDE_DEFAULT_X509_CA_CERTS</strong> to a non-empty value.</p>
</dd>
<dt><strong>--sslcertpath &lt;directory&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: sslcertpath)</div>
<div class="line">Sets the directory fetchmail uses to look up local certificates.
The default is your OpenSSL default directory. The directory must
be hashed the way OpenSSL expects it - every time you add or modify
a certificate in the directory, you need to use the <strong>c_rehash</strong>
tool (which comes with OpenSSL in the tools/ sub-directory). Also,
after OpenSSL upgrades, you may need to run <strong>c_rehash</strong>.</div>
</div>
<p>This can be given in addition to <strong>--sslcertfile</strong> above, which see
for precedence rules.</p>
<p>Note that using this option will suppress adding the default SSL
trusted CA certificates directory unless you set the environment
variable <strong>FETCHMAIL_INCLUDE_DEFAULT_X509_CA_CERTS</strong> to a non-empty
value.</p>
</dd>
<dt><strong>--sslcommonname &lt;common name&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: sslcommonname; since v6.3.9)</div>
<div class="line">Use of this option is discouraged. Before using it, contact the
administrator of your upstream server and ask for a proper SSL
certificate to be used. If that cannot be attained, this option can
be used to specify the name (CommonName) that fetchmail expects on
the server certificate. A correctly configured server will have
this set to the host name by which it is reached, and by default
fetchmail will expect as much. Use this option when the CommonName
is set to some other value, to avoid the &quot;Server CommonName
mismatch&quot; warning, and only if the upstream server's operator
cannot be made to use proper certificates.</div>
</div>
</dd>
<dt><strong>--sslfingerprint &lt;fingerprint&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: sslfingerprint)</div>
<div class="line">Specify the fingerprint of the server key (an MD5 hash of the key)
in hexadecimal notation with colons separating groups of two
digits. The letter hex digits must be in upper case. This is the
format that fetchmail uses to report the fingerprint when an SSL
connection is established. When this is specified, fetchmail will
compare the server key fingerprint with the given one, and the
connection will fail if they do not match, regardless of the
<strong>sslcertck</strong> setting. The connection will also fail if fetchmail
cannot obtain an SSL certificate from the server. This can be used
to prevent man-in-the-middle attacks, but the finger print from the
server must be obtained or verified over a secure channel, and
certainly not over the same Internet connection that fetchmail
would use.</div>
</div>
<p>Using this option will prevent printing certificate verification
errors as long as --nosslcertck is in effect.</p>
<p>To obtain the fingerprint of a certificate stored in the file
cert.pem, try:</p>
</dd>
</dl>
<pre class="literal-block">openssl x509 -in cert.pem -noout -md5 -fingerprint</pre>
<p>For details, see <strong>x509</strong>(1ssl).</p>
</section>
<section id="delivery-control-options">
<h3><a class="toc-backref" href="#toc-entry-12" role="doc-backlink">Delivery Control Options</a></h3>
<dl>
<dt><strong>-S &lt;hosts&gt; | --smtphost &lt;hosts&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: smtp[host])</div>
<div class="line">Specify a hunt list of hosts to forward mail to (one or more host
names, comma-separated). Hosts are tried in list order; the first
one that is up becomes the forwarding target for the current run.
If this option is not specified, 'localhost' is used as the
default. Each host name may have a port number following the host
name. The port number is separated from the host name by a slash;
the default port is &quot;smtp&quot;. If you specify an absolute path name
(beginning with a /), it will be interpreted as the name of a UNIX
socket accepting LMTP connections (such as is supported by the
Cyrus IMAP daemon) Example:</div>
</div>
</dd>
</dl>
<pre class="literal-block">--smtphost server1,server2/2525,server3,/var/imap/socket/lmtp</pre>
<p>This option can be used with ODMR, and will make fetchmail a relay
between the ODMR server and SMTP or LMTP receiver.</p>
<blockquote>
<p>WARNING: if you use address numeric IP addresses here, be sure to use
--smtpaddress or --smtpname (either of which see) with a valid SMTP
address literal!</p>
</blockquote>
<dl>
<dt><strong>--fetchdomains &lt;hosts&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: fetchdomains)</div>
<div class="line">In ETRN or ODMR mode, this option specifies the list of domains the
server should ship mail for once the connection is turned around.
The default is the FQDN of the machine running <strong>fetchmail</strong>.</div>
</div>
</dd>
<dt><strong>-D &lt;domain&gt; | --smtpaddress &lt;domain&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: smtpaddress)</div>
<div class="line">Specify the domain to be appended to addresses in RCPT TO lines
shipped to SMTP. When this is not specified, the name of the SMTP
server (as specified by --smtphost) is used for SMTP/LMTP and
'localhost' is used for UNIX socket/BSMTP.</div>
</div>
<p>NOTE: if you intend to use numeric addresses, or so-called address
literals per the SMTP standard, write them in proper SMTP syntax, for
instance --smtpaddress &quot;[192.0.2.6]&quot; or --smtpaddress
&quot;[IPv6:2001:DB8::6]&quot;.</p>
</dd>
<dt><strong>--smtpname &lt;user&#64;domain&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: smtpname)</div>
<div class="line">Specify the domain and user to be put in RCPT TO lines shipped to
SMTP. The default user is the current local user. Please also see
the NOTE about --smtpaddress and address literals above.</div>
</div>
</dd>
<dt><strong>-Z &lt;nnn&gt; | --antispam &lt;nnn[, nnn]...&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: antispam)</div>
<div class="line">Specifies the list of numeric SMTP errors that are to be
interpreted as a spam-block response from the listener. A value of
-1 disables this option. For the command-line option, the list
values should be comma-separated. Note that the antispam values
only apply to &quot;MAIL FROM&quot; responses in the SMTP/LMTP dialogue, but
several MTAs (Postfix in its default configuration, qmail) defer
the anti-spam response code until after the RCPT TO. --antispam
does not work in these circumstances. Also see --softbounce
(default) and its inverse.</div>
</div>
</dd>
<dt><strong>-m &lt;command&gt; | --mda &lt;command&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: mda)</div>
<div class="line">This option lets <strong>fetchmail</strong> use a Message or Local Delivery
Agent (MDA or LDA) directly, rather than forward via SMTP or LMTP.</div>
</div>
<p>To avoid losing mail, use this option only with MDAs like maildrop or
MTAs like sendmail that exit with a nonzero status on disk-full and
other delivery errors; the nonzero status tells fetchmail that
delivery failed and prevents the message from being deleted on the
server.</p>
<p>If <strong>fetchmail</strong> is running as root, it sets its user id while
delivering mail through an MDA as follows: First, the FETCHMAILUSER,
LOGNAME, and USER environment variables are checked in this order.
The value of the first variable from his list that is defined (even
if it is empty!) is looked up in the system user database. If none of
the variables is defined, fetchmail will use the real user id it was
started with. If one of the variables was defined, but the user
stated there is not found, fetchmail continues running as root,
without checking remaining variables on the list. Practically, this
means that if you run fetchmail as root (not recommended), it is most
useful to define the FETCHMAILUSER environment variable to set the
user that the MDA should run as. Some MDAs (such as maildrop) are
designed to be setuid root and setuid to the recipient's user id, so
you do not lose functionality this way even when running fetchmail as
unprivileged user. Check the MDA's manual for details.</p>
</dd>
</dl>
<p>Some possible MDAs are &quot;/usr/sbin/sendmail -i -f %F -- %T&quot; (<strong>Note:</strong>
some several older or vendor sendmail versions mistake -- for an
address, rather than an indicator to mark the end of the option
arguments), &quot;/usr/bin/deliver&quot; and &quot;/usr/bin/maildrop -d %T&quot;. Local
delivery addresses will be inserted into the MDA command wherever you
place a %T; the mail message's From address will be inserted where you
place an %F.</p>
<p><strong>Do NOT enclose the %F or %T string in single quotes!</strong> For both %T and
%F, fetchmail encloses the addresses in single quotes ('), after
removing any single quotes they may contain, before the MDA command is
passed to the shell.</p>
<p><strong>Do NOT use an MDA invocation that dispatches on the contents of</strong>
To/Cc/Bcc, like &quot;sendmail -i -t&quot; or &quot;qmail-inject&quot;, it will create mail
loops and bring the just wrath of many postmasters down upon your head.
This is one of the most frequent configuration errors!</p>
<p>Also, do <em>not</em> try to combine multidrop mode with an MDA such as
maildrop that can only accept one address, unless your upstream stores
one copy of the message per recipient and transports the envelope
recipient in a header; you will lose mail.</p>
<p>The well-known <strong>procmail</strong>(1) package is very hard to configure
properly, it has a very nasty &quot;fall through to the next rule&quot; behavior
on delivery errors (even temporary ones, such as out of disk space if
another user's mail daemon copies the mailbox around to purge old
messages), so your mail will end up in the wrong mailbox sooner or
later. The proper procmail configuration is outside the scope of this
document. Using <strong>maildrop</strong>(1) is usually much easier, and many users
find the filter syntax used by maildrop easier to understand.</p>
<p>Finally, we strongly advise that you do <strong>not</strong> use qmail-inject. The
command line interface is non-standard without providing benefits for
typical use, and fetchmail makes no attempts to accommodate
qmail-inject's deviations from the standard. Some of qmail-inject's
command-line and environment options are actually dangerous and can
cause broken threads, non-detected duplicate messages and forwarding
loops.</p>
<dl>
<dt><strong>--lmtp</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: lmtp)</div>
<div class="line">Cause delivery via LMTP (Local Mail Transfer Protocol). A service
host and port <strong>must</strong> be explicitly specified on each host in the
smtphost hunt list (see above) if this option is selected; the
default port 25 will (in accordance with <a class="reference external" href="http://tools.ietf.org/html/rfc2033.html">RFC 2033</a>) not be accepted.</div>
</div>
</dd>
<dt><strong>--bsmtp &lt;filename&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: bsmtp)</div>
<div class="line">Append fetched mail to a BSMTP file. This simply contains the SMTP
commands that would normally be generated by fetchmail when passing
mail to an SMTP listener daemon.</div>
</div>
</dd>
</dl>
<p>An argument of '-' causes the SMTP batch to be written to standard
output, which is of limited use: this only makes sense for debugging,
because fetchmail's regular output is interspersed on the same channel,
so this is not suitable for mail delivery. This special mode may be
removed in a later release.</p>
<p>Note that fetchmail's reconstruction of MAIL FROM and RCPT TO lines is
not guaranteed correct; the caveats discussed under THE USE AND ABUSE OF
MULTIDROP MAILBOXES below apply. This mode has precedence before --mda
and SMTP/LMTP.</p>
<dl>
<dt><strong>--bad-header {reject|accept}</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: bad-header; since v6.3.15)</div>
<div class="line">Specify how fetchmail is supposed to treat messages with bad
headers, i.e., headers with bad syntax. Traditionally, fetchmail
has rejected such messages, but some distributors modified
fetchmail to accept them. You can now configure fetchmail's
behaviour per server.</div>
</div>
</dd>
</dl>
</section>
<section id="resource-limit-control-options">
<h3><a class="toc-backref" href="#toc-entry-13" role="doc-backlink">Resource Limit Control Options</a></h3>
<dl>
<dt><strong>-l &lt;maxbytes&gt; | --limit &lt;maxbytes&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: limit)</div>
<div class="line">Takes a maximum octet size argument, where 0 is the default and
also the special value designating &quot;no limit&quot;. If nonzero, messages
larger than this size will not be fetched and will be left on the
server (in foreground sessions, the progress messages will note
that they are &quot;oversized&quot;). If the fetch protocol permits (in
particular, under IMAP or POP3 without the fetchall option) the
message will not be marked seen.</div>
</div>
</dd>
</dl>
<p>An explicit --limit of 0 overrides any limits set in your run control
file. This option is intended for those needing to strictly control
fetch time due to expensive and variable phone rates.</p>
<p>Combined with --limitflush, it can be used to delete oversized messages
waiting on a server. In daemon mode, oversize notifications are mailed
to the calling user (see the --warnings option). This option does not
work with ETRN or ODMR.</p>
<dl>
<dt><strong>-w &lt;interval&gt; | --warnings &lt;interval&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: warnings)</div>
<div class="line">Takes an interval in seconds. When you call <strong>fetchmail</strong> with a
'limit' option in daemon mode, this controls the interval at which
warnings about oversized messages are mailed to the calling user
(or the user specified by the 'postmaster' option). One such
notification is always mailed at the end of the first poll that the
oversized message is detected. Thereafter, re-notification is
suppressed until after the warning interval elapses (it will take
place at the end of the first following poll).</div>
</div>
</dd>
<dt><strong>-b &lt;count&gt; | --batchlimit &lt;count&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: batchlimit)</div>
<div class="line">Specify the maximum number of messages that will be shipped to an
SMTP listener before the connection is deliberately torn down and
rebuilt (defaults to 0, meaning no limit). An explicit --batchlimit
of 0 overrides any limits set in your run control file. While
<strong>sendmail</strong>(8) normally initiates delivery of a message
immediately after receiving the message terminator, some SMTP
listeners are not so prompt. MTAs like <strong>smail</strong>(8) may wait till
the delivery socket is shut down to deliver. This may produce
annoying delays when <strong>fetchmail</strong> is processing very large
batches. Setting the batch limit to some nonzero size will prevent
these delays. This option does not work with ETRN or ODMR.</div>
</div>
</dd>
<dt><strong>-B &lt;number&gt; | --fetchlimit &lt;number&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: fetchlimit)</div>
<div class="line">Limit the number of messages accepted from a given server in a
single poll. By default there is no limit. An explicit --fetchlimit
of 0 overrides any limits set in your run control file. This option
does not work with ETRN or ODMR.</div>
</div>
</dd>
<dt><strong>--fetchsizelimit &lt;number&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: fetchsizelimit)</div>
<div class="line">Limit the number of sizes of messages accepted from a given server
in a single transaction. This option is useful in reducing the
delay in downloading the first mail when there are too many mails
in the mailbox. By default, the limit is 100. If set to 0, sizes of
all messages are downloaded at the start. This option does not work
with ETRN or ODMR. For POP3, the only valid non-zero value is 1.</div>
</div>
</dd>
<dt><strong>--fastuidl &lt;number&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: fastuidl)</div>
<div class="line">Do a binary instead of linear search for the first unseen UID.
Binary search avoids downloading the UIDs of all mails. This saves
time (especially in daemon mode) where downloading the same set of
UIDs in each poll is a waste of bandwidth. The number 'n' indicates
how rarely a linear search should be done. In daemon mode, linear
search is used once followed by binary searches in 'n-1' polls if
'n' is greater than 1; binary search is always used if 'n' is 1;
linear search is always used if 'n' is 0. In non-daemon mode,
binary search is used if 'n' is 1; otherwise linear search is used.
The default value of 'n' is 4. This option works with POP3 only.</div>
</div>
</dd>
<dt><strong>-e &lt;count&gt; | --expunge &lt;count&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: expunge)</div>
<div class="line">Arrange for deletions to be made final after a given number of
messages. Under POP2 or POP3, fetchmail cannot make deletions final
without sending QUIT and ending the session -- with this option on,
fetchmail will break a long mail retrieval session into multiple
sub-sessions, sending QUIT after each sub-session. This is a good
defense against line drops on POP3 servers. Under IMAP,
<strong>fetchmail</strong> normally issues an EXPUNGE command after each
deletion in order to force the deletion to be done immediately.
This is safest when your connection to the server is flaky and
expensive, as it avoids re-sending duplicate mail after a line hit.
However, on large mailboxes the overhead of re-indexing after every
message can slam the server pretty hard, so if your connection is
reliable it is good to do expunges less frequently. Also note that
some servers enforce a delay of a few seconds after each quit, so
fetchmail may not be able to get back in immediately after an
expunge -- you may see &quot;lock busy&quot; errors if this happens. If you
specify this option to an integer N, it tells <strong>fetchmail</strong> to only
issue expunges on every Nth delete. An argument of zero suppresses
expunges entirely (so no expunges at all will be done until the end
of run). This option does not work with ETRN or ODMR.</div>
</div>
</dd>
</dl>
</section>
<section id="authentication-options">
<h3><a class="toc-backref" href="#toc-entry-14" role="doc-backlink">Authentication Options</a></h3>
<dl>
<dt><strong>-u &lt;name&gt; | --user &lt;name&gt; | --username &lt;name&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: user[name])</div>
<div class="line">Specifies the user identification to be used when logging in to the
mail server. The appropriate user identification is both server and
user-dependent. The default is your login name on the client
machine that is running <strong>fetchmail</strong>. See USER AUTHENTICATION
below for a complete description.</div>
</div>
</dd>
<dt><strong>-I &lt;specification&gt; | --interface &lt;specification&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: interface)</div>
<div class="line">Require that a specific interface device be up and have a specific
local or remote IPv4 (IPv6 is not supported by this option yet)
address (or range) before polling. Frequently <strong>fetchmail</strong> is used
over a transient point-to-point TCP/IP link established directly to
a mail server via SLIP or PPP. That is a relatively secure channel.
But when other TCP/IP routes to the mail server exist (e.g., when
the link is connected to an alternate ISP), your username and
password may be vulnerable to snooping (especially when daemon mode
automatically polls for mail, shipping a clear password over the
net at predictable intervals). The --interface option may be used
to prevent this. When the specified link is not up or is not
connected to a matching IP address, polling will be skipped. The
format is:</div>
</div>
</dd>
</dl>
<pre class="literal-block">interface/iii.iii.iii.iii[/mmm.mmm.mmm.mmm]</pre>
<p>The field before the first slash is the interface name (i.e., sl0, ppp0
etc.). The field before the second slash is the acceptable IP address.
The field after the second slash is a mask which specifies a range of IP
addresses to accept. If no mask is present 255.255.255.255 is assumed
(i.e., an exact match). This option is currently only supported under
Linux and FreeBSD. Please see the <strong>monitor</strong> section for below for
FreeBSD specific information.</p>
<p>Note that this option may be removed from a future fetchmail version.</p>
<dl>
<dt><strong>-M &lt;interface&gt; | --monitor &lt;interface&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: monitor)</div>
<div class="line">Daemon mode can cause transient links which are automatically taken
down after a period of inactivity (e.g., PPP links) to remain up
indefinitely. This option identifies a system TCP/IP interface to
be monitored for activity. After each poll interval, if the link is
up but no other activity has occurred on the link, then the poll
will be skipped. However, when fetchmail is woken up by a signal,
the monitor check is skipped and the poll goes through
unconditionally. This option is currently only supported under
Linux and FreeBSD. For the <strong>monitor</strong> and <strong>interface</strong> options to
work for non root users under FreeBSD, the fetchmail binary must be
installed setgid kmem. This would be a security hole, but fetchmail
runs with the effective GID set to that of the kmem group <em>only</em>
when interface data is being collected.</div>
</div>
</dd>
</dl>
<p>Note that this option may be removed from a future fetchmail version.</p>
<dl>
<dt><strong>--auth &lt;type&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: auth[enticate])</div>
<div class="line">This option permits you to specify an authentication type (see USER
AUTHENTICATION below for details). The possible values are <strong>any</strong>,
<strong>password</strong>, <strong>kerberos_v5</strong>, <strong>kerberos</strong> (or, for excruciating
exactness, <strong>kerberos_v4</strong>), <strong>gssapi</strong>, <strong>cram-md5</strong>, <strong>otp</strong>,
<strong>ntlm</strong>, <strong>msn</strong> (only for POP3), <strong>external</strong> (only IMAP) and
<strong>ssh</strong>. When <strong>any</strong> (the default) is specified, fetchmail tries
first methods that do not require a password (EXTERNAL, GSSAPI,
KERBEROS IV, KERBEROS 5); then it looks for methods that mask your
password (CRAM-MD5, NTLM, X-OTP - note that MSN is only supported
for POP3, but not auto-probed); and only if the server does not
support any of those will it ship your password unencrypted. Other
values may be used to force various authentication methods: <strong>ssh</strong>
suppresses authentication and is thus useful for IMAP PREAUTH (if
you are using a secure --plugin, for instance, a properly
configured ssh, you may also need to set --sslproto '' or, in the
rcfile, sslproto '', in order to avoid fetchmail negotiating
STARTTLS over SSH). <strong>external</strong> suppresses authentication and is
thus useful for IMAP EXTERNAL. Any value other than <strong>password</strong>,
<strong>cram-md5</strong>, <strong>ntlm</strong>, <strong>msn</strong> or <strong>otp</strong> suppresses fetchmail's
normal inquiry for a password. Specify <strong>ssh</strong> when you are using
an end-to-end secure connection such as an ssh tunnel (in this case
you may also want to specify <strong>--sslproto ''</strong>, which see); specify
<strong>external</strong> when you use TLS with client authentication and
specify <strong>gssapi</strong> or <strong>kerberos_v4</strong> if you are using a protocol
variant that employs GSSAPI or K4. Choosing KPOP protocol
automatically selects Kerberos authentication. This option does not
work with ETRN. GSSAPI service names are in line with <a class="reference external" href="http://tools.ietf.org/html/rfc2743.html">RFC-2743</a> and
IANA registrations, see <a class="reference external" href="https://www.iana.org/assignments/gssapi-service-names/">Generic Security Service Application
Program Interface (GSSAPI)/Kerberos/SimpleAuthentication and
Security Layer (SASL) Service
Names</a>.</div>
</div>
</dd>
</dl>
</section>
<section id="miscellaneous-options">
<h3><a class="toc-backref" href="#toc-entry-15" role="doc-backlink">Miscellaneous Options</a></h3>
<dl>
<dt><strong>-f &lt;pathname&gt; | --fetchmailrc &lt;pathname&gt;</strong></dt>
<dd><p>Specify a non-default name for the <em>~/.fetchmailrc</em> run control file.
The pathname argument must be either &quot;-&quot; (a single dash, meaning to
read the configuration from standard input) or a filename. Unless the
--version option is also on, a named file argument must have
permissions no more open than 0700 (u=rwx,g=,o=) or else be
/dev/null.</p>
</dd>
<dt><strong>-i &lt;pathname&gt; | --idfile &lt;pathname&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: idfile)</div>
<div class="line">Specify an alternate name for the .fetchids file used to save
message UIDs. NOTE: since fetchmail 6.3.0, write access to the
directory containing the idfile is required, as fetchmail writes a
temporary file and renames it into the place of the real idfile
only if the temporary file has been written successfully. This
avoids the truncation of idfiles when running out of disk space.</div>
</div>
</dd>
<dt><strong>--pidfile &lt;pathname&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: pidfile; since fetchmail v6.3.4)</div>
<div class="line">Override the default location of the PID file that is used as a
lock file. Default: see &quot;ENVIRONMENT&quot; below. Note that many places
in the code and documentation, the term &quot;lock file&quot; is used. This
file contains the process ID of the running fetchmail on the first
line and potentially the daemon interval on a second line.</div>
</div>
</dd>
<dt><strong>-n | --norewrite</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: no rewrite)</div>
<div class="line">Normally, <strong>fetchmail</strong> edits <a class="reference external" href="http://tools.ietf.org/html/rfc822.html">RFC-822</a> address headers (To, From,
Cc, Bcc, and Reply-To) in fetched mail so that any mail IDs local
to the server are expanded to full addresses (&#64; and the mail server
host name are appended). This enables replies on the client to get
addressed correctly (otherwise your mailer might think they should
be addressed to local users on the client machine!). This option
disables the rewrite. (This option is provided to pacify people who
are paranoid about having an MTA edit mail headers and want to know
they can prevent it, but it is generally not a good idea to
actually turn off rewrite.) When using ETRN or ODMR, the rewrite
option is ineffective.</div>
</div>
</dd>
<dt><strong>-E &lt;line&gt; | --envelope &lt;line&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: envelope; Multidrop only)</div>
<div class="line">In the configuration file, an enhanced syntax is used:</div>
<div class="line"><strong>envelope [&lt;count&gt;] &lt;line&gt;</strong></div>
</div>
</dd>
</dl>
<p>This option changes the header <strong>fetchmail</strong> assumes will carry a copy
of the mail's envelope address. Normally this is 'X-Envelope-To'. Other
typically found headers to carry envelope information are
'X-Original-To' and 'Delivered-To'. Now, since these headers are not
standardized, practice varies. See the discussion of multidrop address
handling below. As a special case, 'envelope &quot;Received&quot;' enables parsing
of sendmail-style Received lines. This is the default, but discouraged
because it is not fully reliable.</p>
<p>Note that fetchmail expects the Received-line to be in a specific
format: It must contain &quot;by <em>host</em> for <em>address</em>&quot;, where <em>host</em> must
match one of the mail server names that fetchmail recognizes for the
account in question.</p>
<p>The optional count argument (only available in the configuration file)
determines how many header lines of this kind are skipped. A count of 1
means: skip the first, take the second. A count of 2 means: skip the
first and second, take the third, and so on.</p>
<dl>
<dt><strong>-Q &lt;prefix&gt; | --qvirtual &lt;prefix&gt;</strong></dt>
<dd><div class="line-block">
<div class="line">(Keyword: qvirtual; Multidrop only)</div>
<div class="line">The string prefix assigned to this option will be removed from the
user name found in the header specified with the <em>envelope</em> option
(<em>before</em> doing multidrop name mapping or localdomain checking, if
either is applicable). This option is useful if you are using
<strong>fetchmail</strong> to collect the mail for an entire domain and your ISP
(or your mail redirection provider) is using qmail. One of the
basic features of qmail is the <em>Delivered-To:</em> message header.
Whenever qmail delivers a message to a local mailbox it puts the
username and host name of the envelope recipient on this line. The
major reason for this is to prevent mail loops. To set up qmail to
batch mail for a disconnected site the ISP-mailhost will have
normally put that site in its 'Virtualhosts' control file so it
will add a prefix to all mail addresses for this site. This results
in mail sent to <a class="reference external" href="mailto:'username&#64;userhost.userdom.dom.com">'username&#64;userhost.userdom.dom.com</a>' having a
<em>Delivered-To:</em> line of the form:</div>
</div>
<p>Delivered-To: <a class="reference external" href="mailto:mbox-userstr-username&#64;userhost.example.com">mbox-userstr-username&#64;userhost.example.com</a></p>
<p>The ISP can make the 'mbox-userstr-' prefix anything they choose but
a string matching the user host name is likely. By using the option
'envelope Delivered-To:' you can make fetchmail reliably identify the
original envelope recipient, but you have to strip the
'mbox-userstr-' prefix to deliver to the correct user. This is what
this option is for.</p>
</dd>
<dt><strong>--configdump</strong></dt>
<dd><p>Parse the <em>~/.fetchmailrc</em> file, interpret any command-line options
specified, and dump a configuration report to standard output. The
configuration report is a data structure assignment in the language
Python. This option is meant to be used with an interactive
<em>~/.fetchmailrc</em> editor like <strong>fetchmailconf</strong>, written in Python.</p>
</dd>
<dt><strong>-y | --yydebug</strong></dt>
<dd><p>Enables parser debugging, this option is meant to be used by
developers only.</p>
</dd>
</dl>
</section>
<section id="removed-options">
<h3><a class="toc-backref" href="#toc-entry-16" role="doc-backlink">Removed Options</a></h3>
<dl class="simple">
<dt><strong>-T | --netsec</strong></dt>
<dd><p>Removed before version 6.3.0, the required underlying inet6_apps
library had been discontinued and is no longer available.</p>
</dd>
</dl>
</section>
</section>
<section id="user-authentication-and-encryption">
<h2><a class="toc-backref" href="#toc-entry-17" role="doc-backlink">USER AUTHENTICATION AND ENCRYPTION</a></h2>
<p>All modes except ETRN require authentication of the client to the
server. Normal user authentication in <strong>fetchmail</strong> is very much like
the authentication mechanism of <strong>ftp</strong>(1). The correct user-id and
password depend upon the underlying security system at the mail server.</p>
<p>If the mail server is a Unix machine on which you have an ordinary user
account, your regular login name and password are used with
<strong>fetchmail</strong>. If you use the same login name on both the server and the
client machines, you needn't worry about specifying a user-id with the
<strong>-u</strong> option -- the default behavior is to use your login name on the
client machine as the user-id on the server machine. If you use a
different login name on the server machine, specify that login name with
the <strong>-u</strong> option. E.g., if your login name is 'jsmith' on a machine
named 'mailgrunt', you would start <strong>fetchmail</strong> as follows:</p>
<blockquote>
<p>fetchmail -u jsmith mailgrunt</p>
</blockquote>
<p>The default behavior of <strong>fetchmail</strong> is to prompt you for your mail
server password before the connection is established. This is the safest
way to use <strong>fetchmail</strong> and ensures that your password will not be
compromised. You may also specify your password in your <em>~/.fetchmailrc</em>
file. This is convenient when using <strong>fetchmail</strong> in daemon mode or with
scripts.</p>
<section id="using-netrc-files">
<h3><a class="toc-backref" href="#toc-entry-18" role="doc-backlink">Using netrc files</a></h3>
<p>If you do not specify a password, and <strong>fetchmail</strong> cannot extract one
from your <em>~/.fetchmailrc</em> file, it will look for a <em>~/.netrc</em> file in
your home directory before requesting one interactively; if an entry
matching the mail server is found in that file, the password will be
used. Fetchmail first looks for a match on poll name; if it finds none,
it checks for a match on via name. See the <strong>ftp</strong>(1) man page for
details of the syntax of the <em>~/.netrc</em> file. To show a practical
example, a .netrc might look like this:</p>
<pre class="literal-block">machine hermes.example.org
login joe
password topsecret</pre>
<p>You can repeat this block with different user information if you need to
provide more than one password.</p>
<p>This feature may allow you to avoid duplicating password information in
more than one file.</p>
<p>On mail servers that do not provide ordinary user accounts, your user-id
and password are usually assigned by the server administrator when you
apply for a mailbox on the server. Contact your server administrator if
you do not know the correct user-id and password for your mailbox
account.</p>
</section>
<section id="secure-socket-layers-ssl-and-transport-layer-security-tls">
<h3><a class="toc-backref" href="#toc-entry-19" role="doc-backlink">Secure Socket Layers (SSL) and Transport Layer Security (TLS)</a></h3>
<p>All retrieval protocols can use SSL or TLS wrapping for the transport.
Additionally, POP3 and IMAP retrieval can also negotiate SSL/TLS by
means of STARTTLS (or STLS).</p>
<p>You can access TLS-encrypted services by specifying the options starting
with --ssl, such as --ssl, --sslproto, --sslcertck, and others. You can
also do this using the corresponding user options in the .fetchmailrc
file. Some services, such as POP3 and IMAP, have different well known
ports defined for the SSL encrypted services. The encrypted ports will
be selected automatically when SSL is enabled and no explicit port is
specified. Also, the --sslcertck command line or sslcertck run control
file option should be used to force strict certificate checking with
older fetchmail versions - see below.</p>
<p>If TLS or SSL is not configured, fetchmail will usually still try to use
STARTTLS somewhat opportunistically. In practice, is it still mandatory
because --sslcertck is a default setting and implicitly requires
STARTTLS.</p>
<p>STARTTLS can be enforced by using --sslproto auto and defeated by using
--sslproto ''. STARTTLS connections use the same port as the unencrypted
version of the protocol and negotiate TLS via special command. The
--sslcertck command line or sslcertck run control file option should be
used to force strict certificate checking - see below.</p>
<p><strong>--sslcertck is recommended:</strong> When connecting to an SSL or TLS
encrypted server, the server presents a certificate to the client for
validation. The certificate is checked to verify that the common name in
the certificate matches the name of the server being contacted and that
the effective and expiration dates in the certificate indicate that it
is currently valid. If any of these checks fail, a warning message is
printed, but the connection continues. The server certificate does not
need to be signed by any specific Certifying Authority and may be a
&quot;self-signed&quot; certificate. If the --sslcertck command line option or
sslcertck run control file option is used, fetchmail will instead abort
if any of these checks fail, because it must assume that there is a
man-in-the-middle attack in this scenario, hence fetchmail must not
expose clear-text passwords. Use of the sslcertck or --sslcertck option
is therefore advised; it has become the default in fetchmail 6.4.0.</p>
<p>Some SSL encrypted servers may request a client side certificate. A
client side public SSL certificate and private SSL key may be specified.
If requested by the server, the client certificate is sent to the server
for validation. Some servers may require a valid client certificate and
may refuse connections if a certificate is not provided or if the
certificate is not valid. Some servers may require client side
certificates be signed by a recognized Certifying Authority. The format
for the key files and the certificate files is that required by the
underlying SSL libraries (OpenSSL in the general case).</p>
<p>A word of care about the use of SSL: While above mentioned setup with
self-signed server certificates retrieved over the wires can protect you
from a passive eavesdropper, it does not help against an active
attacker. It is clearly an improvement over sending the passwords in
clear, but you should be aware that a man-in-the-middle attack is
trivially possible (in particular with tools such as
<a class="reference external" href="https://monkey.org/~dugsong/dsniff/">dsniff</a>). Use of strict
certificate checking with a certification authority recognized by server
and client, or perhaps of an SSH tunnel (see below for some examples) is
preferable if you care seriously about the security of your mailbox and
passwords.</p>
</section>
</section>
<section id="pop3-variants">
<h2><a class="toc-backref" href="#toc-entry-20" role="doc-backlink">POP3 VARIANTS</a></h2>
<p>Early versions of POP3 (<a class="reference external" href="http://tools.ietf.org/html/rfc1081.html">RFC1081</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc1225.html">RFC1225</a>) supported a crude form of
independent authentication using the <em>.rhosts</em> file on the mail server
side. Under this RPOP variant, a fixed per-user ID equivalent to a
password was sent in clear over a link to a reserved port, with the
command RPOP rather than PASS to alert the server that it should do
special checking. RPOP is supported by <strong>fetchmail</strong> (you can specify
'protocol RPOP' to have the program send 'RPOP' rather than 'PASS') but
its use is strongly discouraged, and support will be removed from a
future fetchmail version. This facility was vulnerable to spoofing and
was withdrawn in <a class="reference external" href="http://tools.ietf.org/html/rfc1460.html">RFC1460</a>.</p>
<p><a class="reference external" href="http://tools.ietf.org/html/rfc1460.html">RFC1460</a> introduced APOP authentication. In this variant of POP3, you
register an APOP password on your server host (on some servers, the
program to do this is called <strong>popauth</strong>(8)). You put the same
password in your <em>~/.fetchmailrc</em> file. Each time <strong>fetchmail</strong> logs in,
it sends an MD5 hash of your password and the server greeting time to
the server, which can verify it by checking its authorization database.</p>
<p><strong>Note that APOP is no longer considered resistant against</strong>
man-in-the-middle attacks.</p>
<section id="retr-or-top">
<h3><a class="toc-backref" href="#toc-entry-21" role="doc-backlink">RETR or TOP</a></h3>
<p><strong>fetchmail</strong> makes some efforts to make the server believe messages had
not been retrieved, by using the TOP command with a large number of
lines when possible. TOP is a command that retrieves the full header and
a <strong>fetchmail</strong>-specified amount of body lines. It is optional and
therefore not implemented by all servers, and some are known to
implement it improperly. On many servers however, the RETR command which
retrieves the full message with header and body, sets the &quot;seen&quot; flag
(for instance, in a web interface), whereas the TOP command does not do
that.</p>
<p><strong>fetchmail</strong> will always use the RETR command if &quot;fetchall&quot; is set.
<strong>fetchmail</strong> will also use the RETR command if &quot;keep&quot; is set and &quot;uidl&quot;
is unset. Finally, <strong>fetchmail</strong> will use the RETR command on
Maillennium POP3/PROXY servers (used by Comcast) to avoid a deliberate
TOP misinterpretation in this server that causes message corruption.</p>
<p>In all other cases, <strong>fetchmail</strong> will use the TOP command. This implies
that in &quot;keep&quot; setups, &quot;uidl&quot; must be set if &quot;TOP&quot; is desired.</p>
<p><strong>Note</strong> that this description is true for the current version of
fetchmail, but the behavior may change in future versions. In
particular, fetchmail may prefer the RETR command because the TOP
command causes much grief on some servers and is only optional.</p>
</section>
</section>
<section id="alternate-authentication-forms-methods">
<h2><a class="toc-backref" href="#toc-entry-22" role="doc-backlink">ALTERNATE AUTHENTICATION FORMS/METHODS</a></h2>
<p>If your <strong>fetchmail</strong> was built with Kerberos support and you specify
Kerberos authentication (either with --auth or the <em>.fetchmailrc</em> option
<strong>authenticate kerberos_v4</strong>) it will try to get a Kerberos ticket from
the mail server at the start of each query. Note: if either the pollname
or via name is 'hesiod', fetchmail will try to use Hesiod to look up the
mail server.</p>
<p>If you use POP3 or IMAP with GSSAPI authentication, <strong>fetchmail</strong> will
expect the server to have <a class="reference external" href="http://tools.ietf.org/html/rfc1731.html">RFC1731</a>- or <a class="reference external" href="http://tools.ietf.org/html/rfc1734.html">RFC1734</a>-conforming GSSAPI
capability, and will use it. Currently this has only been tested over
Kerberos 5, so you are expected to already have a ticket-granting
ticket. You may pass a username different from your principal name using
the standard <strong>--user</strong> command or by the <em>.fetchmailrc</em> option
<strong>user</strong>.</p>
<p>If your IMAP daemon returns the PREAUTH response in its greeting line,
fetchmail will notice this and skip the normal authentication step. This
can be useful, e.g., if you start imapd explicitly using ssh. In this
case you can declare the authentication value 'ssh' on that site entry
to stop <em>.fetchmail</em> from asking you for a password when it starts up.</p>
<p>If you use client authentication with <em>TLS1</em> and your IMAP daemon
returns the <em>AUTH=EXTERNAL</em> response, fetchmail will notice this and
will use the authentication shortcut and will not send the passphrase.
In this case you can declare the authentication value 'external' on that
site to stop <strong>fetchmail</strong> from asking you for a password when it starts
up.</p>
<p>If you are using POP3, and the server issues a one-time-password
challenge conforming to <a class="reference external" href="http://tools.ietf.org/html/rfc1938.html">RFC1938</a>, <strong>fetchmail</strong> will use your password as
a pass phrase to generate the required response. This avoids sending
secrets over the net unencrypted.</p>
<p>Compuserve's RPA authentication is supported. If you compile in the
support, <strong>fetchmail</strong> will try to perform an RPA pass-phrase
authentication instead of sending over the password unencrypted if it
detects &quot;&#64;compuserve.com&quot; in the host name.</p>
<p>If you are using IMAP, Microsoft's NTLM authentication (used by
Microsoft Exchange) is supported. If you compile in the support,
<strong>fetchmail</strong> will try to perform an NTLM authentication (instead of
sending over the password unencrypted) whenever the server returns
AUTH=NTLM in its capability response. Specify a user option value that
looks like <a class="reference external" href="mailto:'user&#64;domain">'user&#64;domain</a>': the part to the left of the &#64; will be passed
as the username and the part to the right as the NTLM domain.</p>
<section id="esmtp-auth">
<h3><a class="toc-backref" href="#toc-entry-23" role="doc-backlink">ESMTP AUTH</a></h3>
<p><strong>fetchmail</strong> also supports authentication to the ESMTP server on the
client side according to <a class="reference external" href="http://tools.ietf.org/html/rfc2554.html">RFC 2554</a>. You can specify a name/password pair
to be used with the keywords 'esmtpname' and 'esmtppassword'; the former
defaults to the username of the calling user.</p>
</section>
</section>
<section id="daemon-mode">
<h2><a class="toc-backref" href="#toc-entry-24" role="doc-backlink">DAEMON MODE</a></h2>
<section id="introducing-the-daemon-mode">
<h3><a class="toc-backref" href="#toc-entry-25" role="doc-backlink">Introducing the daemon mode</a></h3>
<p>In daemon mode, <strong>fetchmail</strong> puts itself into the background and runs
forever, querying each specified host and then sleeping for a given
polling interval.</p>
</section>
<section id="starting-the-daemon-mode">
<h3><a class="toc-backref" href="#toc-entry-26" role="doc-backlink">Starting the daemon mode</a></h3>
<p>There are several ways to make fetchmail work in daemon mode. On the
command line, <strong>--daemon &lt;interval&gt;</strong> or <strong>-d &lt;interval&gt;</strong> option runs
<strong>fetchmail</strong> in daemon mode. You must specify a numeric argument which
is a polling interval (time to wait after completing a whole poll cycle
with the last server and before starting the next poll cycle with the
first server) in seconds.</p>
<p>Example: simply invoking</p>
<blockquote>
<p>fetchmail -d 900</p>
</blockquote>
<p>will, therefore, poll all the hosts described in your <em>~/.fetchmailrc</em>
file (except those explicitly excluded with the 'skip' verb) a bit less
often than once every 15 minutes (exactly: 15 minutes + time that the
poll takes).</p>
<p>It is also possible to set a polling interval in your <em>~/.fetchmailrc</em>
file by saying 'set daemon &lt;interval&gt;', where &lt;interval&gt; is an integer
number of seconds. If you do this, fetchmail will always start in daemon
mode unless you override it with the command-line option --daemon 0 or
-d0.</p>
<p>Only one daemon process is permitted per user; in daemon mode,
<strong>fetchmail</strong> sets up a per-user lock file to guarantee this. (You can
however cheat and set the FETCHMAILHOME environment variable to overcome
this setting, but in that case, it is your responsibility to make sure
you are not polling the same server with two processes at the same
time.)</p>
</section>
<section id="awakening-the-background-daemon">
<h3><a class="toc-backref" href="#toc-entry-27" role="doc-backlink">Awakening the background daemon</a></h3>
<p>Normally, calling fetchmail with a daemon in the background sends a
wake-up signal to the daemon and quits without output. The background
daemon then starts its next poll cycle immediately. The wake-up signal,
SIGUSR1, can also be sent manually. The wake-up action also clears any
'wedged' flags indicating that connections have wedged due to failed
authentication or multiple timeouts.</p>
</section>
<section id="terminating-the-background-daemon">
<h3><a class="toc-backref" href="#toc-entry-28" role="doc-backlink">Terminating the background daemon</a></h3>
<p>The option <strong>-q</strong> or <strong>--quit</strong> will kill a running daemon process
instead of waking it up (if there is no such process, <strong>fetchmail</strong> will
notify you). If the --quit option appears last on the command line,
<strong>fetchmail</strong> will kill the running daemon process and then quit.
Otherwise, <strong>fetchmail</strong> will first kill a running daemon process and
then continue running with the other options.</p>
</section>
<section id="useful-options-for-daemon-mode">
<h3><a class="toc-backref" href="#toc-entry-29" role="doc-backlink">Useful options for daemon mode</a></h3>
<div class="line-block">
<div class="line">The <strong>-L &lt;filename&gt;</strong> or <strong>--logfile &lt;filename&gt;</strong> option (keyword: set
logfile) is only effective when fetchmail is detached and in daemon
mode. Note that <strong>the logfile must exist</strong> before fetchmail is run,
you can use the <strong>touch</strong>(1) command with the filename as its sole
argument to create it.</div>
<div class="line">This option allows you to redirect status messages into a specified
logfile (follow the option with the logfile name). The logfile is
opened for append, so previous messages are not deleted. This is
primarily useful for debugging configurations. Note that fetchmail
does not detect if the logfile is rotated, the logfile is only opened
once when fetchmail starts. You need to restart fetchmail after
rotating the logfile and before compressing it (if applicable).</div>
</div>
<p>The <strong>--syslog</strong> option (keyword: set syslog) allows you to redirect
status and error messages emitted to the <strong>syslog</strong>(3) system daemon
if available. Messages are logged with an id of <strong>fetchmail</strong>, the
facility <strong>LOG_MAIL</strong>, and priorities <strong>LOG_ERR</strong>, <strong>LOG_ALERT</strong> or
<strong>LOG_INFO</strong>. This option is intended for logging status and error
messages which indicate the status of the daemon and the results while
fetching mail from the server(s). Error messages for command line
options and parsing the <em>.fetchmailrc</em> file are still written to stderr,
or to the specified log file. The <strong>--nosyslog</strong> option turns off use of
<strong>syslog</strong>(3), assuming it is turned on in the <em>~/.fetchmailrc</em> file.
This option is overridden, in certain situations, by <strong>--logfile</strong>
(which see).</p>
<p>The <strong>-N</strong> or <strong>--nodetach</strong> option suppresses backgrounding and
detachment of the daemon process from its control terminal. This is
useful for debugging or when fetchmail runs as the child of a supervisor
process such as <strong>init</strong>(8) or Gerrit Pape's <strong>runit</strong>(8). Note that
this also causes the logfile option to be ignored.</p>
<p>Note that while running in daemon mode polling a POP2 or IMAP2bis
server, transient errors (such as DNS failures or sendmail delivery
refusals) may force the fetchall option on for the duration of the next
polling cycle. This is a robustness feature. It means that if a message
is fetched (and thus marked seen by the mail server) but not delivered
locally due to some transient error, it will be re-fetched during the
next poll cycle. (The IMAP logic does not delete messages until they are
delivered, so this problem does not arise.)</p>
<p>If you touch or change the <em>~/.fetchmailrc</em> file while fetchmail is
running in daemon mode, this will be detected at the beginning of the
next poll cycle. When a changed <em>~/.fetchmailrc</em> is detected, fetchmail
rereads it and restarts from scratch (using exec(2); no state
information is retained in the new instance). Note that if fetchmail
needs to query for passwords, of that if you break the <em>~/.fetchmailrc</em>
file's syntax, the new instance will softly and silently vanish away on
startup.</p>
</section>
</section>
<section id="administrative-options">
<h2><a class="toc-backref" href="#toc-entry-30" role="doc-backlink">ADMINISTRATIVE OPTIONS</a></h2>
<p>The <strong>--postmaster &lt;name&gt;</strong> option (keyword: set postmaster) specifies
the last-resort username to which multidrop mail is to be forwarded if
no matching local recipient can be found. It is also used as destination
of undeliverable mail if the 'bouncemail' global option is off and
additionally for spam-blocked mail if the 'bouncemail' global option is
off and the 'spambounce' global option is on. This option defaults to
the user who invoked <strong>fetchmail</strong>. If the invoking user is root, then
the default of this option is the user 'postmaster'. Setting postmaster
to the empty string causes such mail as described above to be discarded
- this however is usually a bad idea. See also the description of the
'FETCHMAILUSER' environment variable in the ENVIRONMENT section below.</p>
<p>The <strong>--nobounce</strong> behaves like the &quot;set no bouncemail&quot; global option,
which see.</p>
<p>The <strong>--invisible</strong> option (keyword: set invisible) tries to make
fetchmail invisible. Normally, fetchmail behaves like any other MTA
would -- it generates a Received header into each message describing its
place in the chain of transmission, and tells the MTA it forwards to
that the mail came from the machine fetchmail itself is running on. If
the invisible option is on, the Received header is suppressed and
fetchmail tries to spoof the MTA it forwards to into thinking it came
directly from the mail server host.</p>
<p>The <strong>--showdots</strong> option (keyword: set showdots) forces fetchmail to
show progress dots even if the output goes to a file or fetchmail is not
in verbose mode. Fetchmail shows the dots by default when run in
--verbose mode <em>and</em> output goes to console. This option is ignored in
--silent mode.</p>
<p>By specifying the <strong>--tracepolls</strong> option, you can ask fetchmail to add
information to the Received header on the form &quot;polling {label} account
{user}&quot;, where {label} is the account label (from the specified rcfile,
normally ~/.fetchmailrc) and {user} is the username which is used to log
on to the mail server. This header can be used to make filtering email
where no useful header information is available and you want mail from
different accounts sorted into different mailboxes (this could, for
example, occur if you have an account on the same server running a
mailing list, and are subscribed to the list using that account). The
default is not adding any such header. In <em>.fetchmailrc</em>, this is called
'tracepolls'.</p>
</section>
<section id="retrieval-failure-modes">
<h2><a class="toc-backref" href="#toc-entry-31" role="doc-backlink">RETRIEVAL FAILURE MODES</a></h2>
<p>The protocols <strong>fetchmail</strong> uses to talk to mail servers are next to
bulletproof. In normal operation forwarding to port 25, no message is
ever deleted (or even marked for deletion) on the host until the SMTP
listener on the client side has acknowledged to <strong>fetchmail</strong> that the
message has been either accepted for delivery or rejected due to a spam
block.</p>
<p>When forwarding to an MDA, however, there is more possibility of error.
Some MDAs are 'safe' and reliably return a nonzero status on any
delivery error, even one due to temporary resource limits. The
<strong>maildrop</strong>(1) program is like this; so are most programs designed as
mail transport agents, such as <strong>sendmail</strong>(1), including the sendmail
wrapper of Postfix and <strong>exim</strong>(1). These programs give back a
reliable positive acknowledgement and can be used with the mda option
with no risk of mail loss. Unsafe MDAs, though, may return 0 even on
delivery failure. If this happens, you will lose mail.</p>
<p>The normal mode of <strong>fetchmail</strong> is to try to download only 'new'
messages, leaving untouched (and undeleted) messages you have already
read directly on the server (or fetched with a previous <em>fetchmail</em>
--keep). But you may find that messages you have already read on the
server are being fetched (and deleted) even when you do not specify
--all. There are several reasons this can happen.</p>
<p>One could be that you are using POP2. The POP2 protocol includes no
representation of 'new' or 'old' state in messages, so <strong>fetchmail</strong>
must treat all messages as new all the time. But POP2 is obsolete, so
this is unlikely.</p>
<p>A potential POP3 problem might be servers that insert messages in the
middle of mailboxes (some VMS implementations of mail are rumored to do
this). The <strong>fetchmail</strong> code assumes that new messages are appended to
the end of the mailbox; when this is not true it may treat some old
messages as new and vice versa. Using UIDL whilst setting fastuidl 0
might fix this, otherwise, consider switching to IMAP.</p>
<p>Yet another POP3 problem is that if they cannot make temporary files in
the user's home directory, some POP3 servers will hand back an
undocumented response that causes fetchmail to spuriously report &quot;No
mail&quot;.</p>
<p>The IMAP code uses the presence or absence of the server flag \Seen to
decide whether or not a message is new. This is not the right thing to
do, fetchmail should check the UIDVALIDITY and use UID, but it does not
do that yet. Under Unix, it counts on your IMAP server to notice the
BSD-style Status flags set by mail user agents and set the \Seen flag
from them when appropriate. All Unix IMAP servers we know of do this,
though it is not specified by the IMAP RFCs. If you ever trip over a
server that does not, the symptom will be that messages you have already
read on your host will look new to the server. In this (unlikely) case,
only messages you fetched with <em>fetchmail --keep</em> will be both undeleted
and marked old.</p>
<p>In ETRN and ODMR modes, <strong>fetchmail</strong> does not actually retrieve
messages; instead, it asks the server's SMTP listener to start a queue
flush to the client via SMTP. Therefore it sends only undelivered
messages.</p>
</section>
<section id="spam-filtering">
<h2><a class="toc-backref" href="#toc-entry-32" role="doc-backlink">SPAM FILTERING</a></h2>
<p>Many SMTP listeners allow administrators to set up 'spam filters' that
block unsolicited email from specified domains. A MAIL FROM or DATA line
that triggers this feature will elicit an SMTP response which
(unfortunately) varies according to the listener.</p>
<p>Newer versions of <strong>sendmail</strong> return an error code of 571.</p>
<p>According to <a class="reference external" href="http://tools.ietf.org/html/rfc2821.html">RFC2821</a>, the correct thing to return in this situation is
550 &quot;Requested action not taken: mailbox unavailable&quot; (the draft adds
&quot;[E.g., mailbox not found, no access, or command rejected for policy
reasons].&quot;).</p>
<p>Older versions of the <strong>exim</strong> MTA return 501 &quot;Syntax error in
parameters or arguments&quot;.</p>
<p>The <strong>postfix</strong> MTA runs 554 as an antispam response.</p>
<p><strong>Zmailer</strong> may reject code with a 500 response (followed by an enhanced
status code that contains more information).</p>
<p>Return codes which <strong>fetchmail</strong> treats as antispam responses and
discards the message can be set with the 'antispam' option. This is one
of the <em>only</em> three circumstance under which fetchmail ever discards
mail (the others are the 552 and 553 errors described below, and the
suppression of multi-dropped messages with a message-ID already seen).</p>
<p>If <strong>fetchmail</strong> is fetching from an IMAP server, the antispam response
will be detected and the message rejected immediately after the headers
have been fetched, without reading the message body. Thus, you will not
pay for downloading spam message bodies.</p>
<p>By default, the list of antispam responses is empty.</p>
<p>If the <em>spambounce</em> global option is on, mail that is spam-blocked
triggers an <a class="reference external" href="http://tools.ietf.org/html/rfc1892.html">RFC1892</a>/<a class="reference external" href="http://tools.ietf.org/html/rfc1894.html">RFC1894</a> bounce message informing the originator that
we do not accept mail from it. See also BUGS.</p>
</section>
<section id="smtp-esmtp-error-handling">
<h2><a class="toc-backref" href="#toc-entry-33" role="doc-backlink">SMTP/ESMTP ERROR HANDLING</a></h2>
<p>Besides the spam-blocking described above, fetchmail takes special
actions — that may be modified by the --softbounce option — on the
following SMTP/ESMTP error response codes</p>
<dl class="simple">
<dt>452 (insufficient system storage)</dt>
<dd><p>Leave the message in the server mailbox for later retrieval.</p>
</dd>
<dt>552 (message exceeds fixed maximum message size)</dt>
<dd><p>Delete the message from the server. Send bounce-mail to the
originator.</p>
</dd>
<dt>553 (invalid sending domain)</dt>
<dd><p>Delete the message from the server. Do not even try to send
bounce-mail to the originator.</p>
</dd>
</dl>
<p>Other errors greater or equal to 500 trigger bounce mail back to the
originator, unless suppressed by --softbounce. See also BUGS.</p>
</section>
<section id="the-run-control-file">
<h2><a class="toc-backref" href="#toc-entry-34" role="doc-backlink">THE RUN CONTROL FILE</a></h2>
<p>The preferred way to set up fetchmail is to write a <em>.fetchmailrc</em> file
in your home directory (you may do this directly, with a text editor, or
indirectly via <strong>fetchmailconf</strong>). When there is a conflict between the
command-line arguments and the arguments in this file, the command-line
arguments take precedence.</p>
<p>To protect the security of your passwords, your <em>~/.fetchmailrc</em> may not
normally have more than 0700 (u=rwx,g=,o=) permissions; <strong>fetchmail</strong>
will complain and exit otherwise (this check is suppressed when
--version is on).</p>
<p>You may read the <em>.fetchmailrc</em> file as a list of commands to be
executed when <strong>fetchmail</strong> is called with no arguments.</p>
<section id="run-control-syntax">
<h3><a class="toc-backref" href="#toc-entry-35" role="doc-backlink">Run Control Syntax</a></h3>
<p>Comments begin with a '#' and extend through the end of the line.
Otherwise the file consists of a series of server entries or global
option statements in a free-format, token-oriented syntax.</p>
<p>There are four kinds of tokens: grammar keywords, numbers (i.e., decimal
digit sequences), unquoted strings, and quoted strings. A quoted string
is bounded by double quotes and may contain whitespace (and quoted
digits are treated as a string). Note that quoted strings will also
contain line feed characters if they run across two or more lines,
unless you use a backslash to join lines (see below). An unquoted string
is any whitespace-delimited token that is neither numeric, string quoted
nor contains the special characters ',', ';', ':', or '='.</p>
<p>Any amount of whitespace separates tokens in server entries, but is
otherwise ignored. You may use backslash escape sequences (\n for LF,
\t for HT, \b for BS, \r for CR, \<em>nnn</em> for decimal (where nnn
cannot start with a 0), \0<em>ooo</em> for octal, and \x<em>hh</em> for hex) to
embed non-printable characters or string delimiters in strings. In
quoted strings, a backslash at the very end of a line will cause the
backslash itself and the line feed (LF or NL, new line) character to be
ignored, so that you can wrap long strings. Without the backslash at the
line end, the line feed character would become part of the string.</p>
<p><strong>Warning:</strong> while these resemble C-style escape sequences, they are not
the same. fetchmail only supports these eight styles. C supports more
escape sequences that consist of backslash (\) and a single character,
but does not support decimal codes and does not require the leading 0 in
octal notation. Example: fetchmail interprets \233 the same as \xE9
(Latin small letter e with acute), where C would interpret \233 as
octal 0233 = \x9B (CSI, control sequence introducer).</p>
<p>Each server entry consists of one of the keywords 'poll' or 'skip',
followed by a server name, followed by server options, followed by any
number of user (or username) descriptions, followed by user options.
Note: the most common cause of syntax errors is mixing up user and
server options or putting user options before the user descriptions.</p>
<p>For backward compatibility, the word 'server' is a synonym for 'poll'.</p>
<p>You can use the noise keywords 'and', 'with', 'has', 'wants', and
'options' anywhere in an entry to make it resemble English. They are
ignored, but can make entries much easier to read at a glance. The
punctuation characters ':', ';' and ',' are also ignored.</p>
</section>
<section id="poll-versus-skip">
<h3><a class="toc-backref" href="#toc-entry-36" role="doc-backlink">Poll versus Skip</a></h3>
<p>The 'poll' verb tells fetchmail to query this host when it is run with
no arguments. The 'skip' verb tells <strong>fetchmail</strong> not to poll this host
unless it is explicitly named on the command line. (The 'skip' verb
allows you to experiment with test entries safely, or easily disable
entries for hosts that are temporarily down.)</p>
</section>
</section>
<section id="keyword-option-summary">
<h2><a class="toc-backref" href="#toc-entry-37" role="doc-backlink">KEYWORD/OPTION SUMMARY</a></h2>
<p>Here are the legal options. Keyword suffixes enclosed in square brackets
are optional. Those corresponding to short command-line options are
followed by '-' and the appropriate option letter. If option is only
relevant to a single mode of operation, it is noted as 's' or 'm' for
singledrop- or multidrop-mode, respectively.</p>
<p>Here are the legal global options:</p>
<table>
<thead>
<tr><th class="head"><p>Keyword</p></th>
<th class="head"><p>Opt</p></th>
<th class="head"><p>Mode</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>set daemon</p></td>
<td><p>-d</p></td>
<td></td>
<td><p>Set a background poll
interval in seconds.</p></td>
</tr>
<tr><td><p>set postmaster</p></td>
<td></td>
<td></td>
<td><p>Give the name of the
last-resort mail
recipient (default: user
running fetchmail,
&quot;postmaster&quot; if run by
the root user)</p></td>
</tr>
<tr><td><p>set bouncemail</p></td>
<td></td>
<td></td>
<td><p>Direct error mail to the
sender (default)</p></td>
</tr>
<tr><td><p>set no bouncemail</p></td>
<td></td>
<td></td>
<td><p>Direct error mail to the
local postmaster (as per
the 'postmaster' global
option above).</p></td>
</tr>
<tr><td><p>set no spambounce</p></td>
<td></td>
<td></td>
<td><p>Do not bounce
spam-blocked mail
(default).</p></td>
</tr>
<tr><td><p>set spambounce</p></td>
<td></td>
<td></td>
<td><p>Bounce blocked
spam-blocked mail (as
per the 'antispam' user
option) back to the
destination as indicated
by the 'bouncemail'
global option. Warning:
Do not use this to
bounce spam back to the
sender - most spam is
sent with false sender
address and thus this
option hurts innocent
bystanders.</p></td>
</tr>
<tr><td><p>set no softbounce</p></td>
<td></td>
<td></td>
<td><p>Delete permanently
undeliverable mail. It
is recommended to use
this option if the
configuration has been
thoroughly tested.</p></td>
</tr>
<tr><td><p>set softbounce</p></td>
<td></td>
<td></td>
<td><p>Keep permanently
undeliverable mail as
though a temporary error
had occurred (default).</p></td>
</tr>
<tr><td><p>set logfile</p></td>
<td><p>-L</p></td>
<td></td>
<td><p>Name of a file to append
error and status
messages to. Only
effective in daemon mode
and if fetchmail
detaches. If effective,
overrides <strong>set</strong>
syslog.</p></td>
</tr>
<tr><td><p>set pidfile</p></td>
<td><p>-p</p></td>
<td></td>
<td><p>Name of the PID file.</p></td>
</tr>
<tr><td><p>set idfile</p></td>
<td><p>-i</p></td>
<td></td>
<td><p>Name of the file to
store UID lists in.</p></td>
</tr>
<tr><td><p>set syslog</p></td>
<td></td>
<td></td>
<td><p>Do error logging through
syslog(3). May be
overridden by <strong>set</strong>
logfile.</p></td>
</tr>
<tr><td><p>set no syslog</p></td>
<td></td>
<td></td>
<td><p>Turn off error logging
through syslog(3).
(default)</p></td>
</tr>
<tr><td><p>set properties</p></td>
<td></td>
<td></td>
<td><p>String value that is
ignored by fetchmail
(may be used by
extension scripts).</p></td>
</tr>
</tbody>
</table>
<p>Here are the legal server options:</p>
<table>
<thead>
<tr><th class="head"><p>Keyword</p></th>
<th class="head"><p>Opt</p></th>
<th class="head"><p>Mode</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>via</p></td>
<td></td>
<td></td>
<td><p>Specify DNS name of mail
server, overriding poll
name</p></td>
</tr>
<tr><td><p>proto[col]</p></td>
<td><p>-p</p></td>
<td></td>
<td><p>Specify protocol (case
insensitive): POP2,
POP3, IMAP, APOP, KPOP</p></td>
</tr>
<tr><td><p>local[domains]</p></td>
<td></td>
<td><p>m</p></td>
<td><p>Specify domain(s) to be
regarded as local</p></td>
</tr>
<tr><td><p>port</p></td>
<td></td>
<td></td>
<td><p>Specify TCP/IP service
port (obsolete, use
'service' instead).</p></td>
</tr>
<tr><td><p>service</p></td>
<td><p>-P</p></td>
<td></td>
<td><p>Specify service name (a
numeric value is also
allowed and considered a
TCP/IP port number).</p></td>
</tr>
<tr><td><p>auth[enticate]</p></td>
<td></td>
<td></td>
<td><p>Set authentication type
(default 'any')</p></td>
</tr>
<tr><td><p>timeout</p></td>
<td><p>-t</p></td>
<td></td>
<td><p>Server inactivity
timeout in seconds
(default 300)</p></td>
</tr>
<tr><td><p>envelope</p></td>
<td><p>-E</p></td>
<td><p>m</p></td>
<td><p>Specify envelope-address
header name</p></td>
</tr>
<tr><td><p>no envelope</p></td>
<td></td>
<td><p>m</p></td>
<td><p>Disable looking for
envelope address</p></td>
</tr>
<tr><td><p>qvirtual</p></td>
<td><p>-Q</p></td>
<td><p>m</p></td>
<td><p>Qmail virtual domain
prefix to remove from
user name</p></td>
</tr>
<tr><td><p>aka</p></td>
<td></td>
<td><p>m</p></td>
<td><p>Specify alternate DNS
names of mail server</p></td>
</tr>
<tr><td><p>interface</p></td>
<td><p>-I</p></td>
<td></td>
<td><p>specify IP interface(s)
that must be up for
server poll to take
place</p></td>
</tr>
<tr><td><p>monitor</p></td>
<td><p>-M</p></td>
<td></td>
<td><p>Specify IP address to
monitor for activity</p></td>
</tr>
<tr><td><p>plugin</p></td>
<td></td>
<td></td>
<td><p>Specify command through
which to make server
connections.</p></td>
</tr>
<tr><td><p>plugout</p></td>
<td></td>
<td></td>
<td><p>Specify command through
which to make listener
connections.</p></td>
</tr>
<tr><td><p>dns</p></td>
<td></td>
<td><p>m</p></td>
<td><p>Enable DNS lookup for
multidrop (default)</p></td>
</tr>
<tr><td><p>no dns</p></td>
<td></td>
<td><p>m</p></td>
<td><p>Disable DNS lookup for
multidrop</p></td>
</tr>
<tr><td><p>checkalias</p></td>
<td></td>
<td><p>m</p></td>
<td><p>Do comparison by IP
address for multidrop</p></td>
</tr>
<tr><td><p>no checkalias</p></td>
<td></td>
<td><p>m</p></td>
<td><p>Do comparison by name
for multidrop (default)</p></td>
</tr>
<tr><td><p>uidl</p></td>
<td><p>-U</p></td>
<td></td>
<td><p>Force POP3 to use
client-side UIDLs
(recommended)</p></td>
</tr>
<tr><td><p>no uidl</p></td>
<td></td>
<td></td>
<td><p>Turn off POP3 use of
client-side UIDLs
(default)</p></td>
</tr>
<tr><td><p>interval</p></td>
<td></td>
<td></td>
<td><p>Only check this site
every N poll cycles; N
is a numeric argument.</p></td>
</tr>
<tr><td><p>tracepolls</p></td>
<td></td>
<td></td>
<td><p>Add poll tracing
information to the
Received header</p></td>
</tr>
<tr><td><p>principal</p></td>
<td></td>
<td></td>
<td><p>Set Kerberos principal
(only useful with IMAP
and kerberos)</p></td>
</tr>
<tr><td><p>esmtpname</p></td>
<td></td>
<td></td>
<td><p>Set name for <a class="reference external" href="http://tools.ietf.org/html/rfc2554.html">RFC2554</a>
authentication to the
ESMTP server.</p></td>
</tr>
<tr><td><p>esmtppassword</p></td>
<td></td>
<td></td>
<td><p>Set password for <a class="reference external" href="http://tools.ietf.org/html/rfc2554.html">RFC2554</a>
authentication to the
ESMTP server.</p></td>
</tr>
<tr><td><p>bad-header</p></td>
<td></td>
<td></td>
<td><p>How to treat messages
with a bad header. Can
be reject (default) or
accept.</p></td>
</tr>
</tbody>
</table>
<p>Here are the legal user descriptions and options:</p>
<table>
<thead>
<tr><th class="head"><p>Keyword</p></th>
<th class="head"><p>Opt</p></th>
<th class="head"><p>Mode</p></th>
<th class="head"><p>Function</p></th>
</tr>
</thead>
<tbody>
<tr><td><p>user[name]</p></td>
<td><p>-u</p></td>
<td></td>
<td><p>This is the
user
description and
must come first
after server
description and
after possible
server options,
and before user
options.</p>
<p>It sets the
remote user
name if by
itself or
followed by
'there', or the
local user name
if followed by
'here'.</p>
</td>
</tr>
<tr><td><p>is</p></td>
<td></td>
<td></td>
<td><p>Connect local
and remote user
names</p></td>
</tr>
<tr><td><p>to</p></td>
<td></td>
<td></td>
<td><p>Connect local
and remote user
names</p></td>
</tr>
<tr><td><p>pass[word]</p></td>
<td></td>
<td></td>
<td><p>Specify remote
account
password</p></td>
</tr>
<tr><td><p>ssl</p></td>
<td></td>
<td></td>
<td><p>Connect to
server over the
specified base
protocol using
SSL encryption</p></td>
</tr>
<tr><td><p>sslcert</p></td>
<td></td>
<td></td>
<td><p>Specify file
for <strong>client
side</strong> public
SSL certificate</p></td>
</tr>
<tr><td><p>sslcertck</p></td>
<td></td>
<td></td>
<td><p>Enable strict
certificate
checking and
abort
connection on
failure.
Default only
since fetchmail
v6.4.0.</p></td>
</tr>
<tr><td><p>no sslcertck</p></td>
<td></td>
<td></td>
<td><p>Disable strict
certificate
checking and
permit
connections to
continue on
failed
verification.
Discouraged.
Should only be
used together
with
sslfingerprint.</p></td>
</tr>
<tr><td><p>sslcertfile</p></td>
<td></td>
<td></td>
<td><p>Specify file
with trusted CA
certificates</p></td>
</tr>
<tr><td><p>sslcertpath</p></td>
<td></td>
<td></td>
<td><p>Specify
c_rehash-ed
directory with
trusted CA
certificates.</p></td>
</tr>
<tr><td><p>sslfingerprint</p></td>
<td></td>
<td><p>Specify the
expected server
certificate
finger print
from an MD5
hash. Fetchmail
will disconnect
and log an
error if it
does not match.</p></td>
<td></td>
</tr>
<tr><td><p>sslkey</p></td>
<td></td>
<td></td>
<td><p>Specify file
for <strong>client
side</strong> private
SSL key</p></td>
</tr>
<tr><td><p>sslproto</p></td>
<td></td>
<td></td>
<td><p>Force ssl
protocol for
connection</p></td>
</tr>
<tr><td><p>folder</p></td>
<td><p>-r</p></td>
<td></td>
<td><p>Specify remote
folder to query</p></td>
</tr>
<tr><td><p>smtphost</p></td>
<td><p>-S</p></td>
<td></td>
<td><p>Specify smtp
host(s) to
forward to</p></td>
</tr>
<tr><td><p>fetchdomains</p></td>
<td></td>
<td><p>m</p></td>
<td><p>Specify domains
for which mail
should be
fetched</p></td>
</tr>
<tr><td><p>smtpaddress</p></td>
<td><p>-D</p></td>
<td></td>
<td><p>Specify the
domain to be
put in RCPT TO
lines</p></td>
</tr>
<tr><td><p>smtpname</p></td>
<td></td>
<td></td>
<td><p>Specify the
user and domain
to be put in
RCPT TO lines</p></td>
</tr>
<tr><td><p>antispam</p></td>
<td><p>-Z</p></td>
<td></td>
<td><p>Specify what
SMTP returns
are interpreted
as spam-policy
blocks</p></td>
</tr>
<tr><td><p>mda</p></td>
<td><p>-m</p></td>
<td></td>
<td><p>Specify MDA for
local delivery</p></td>
</tr>
<tr><td><p>bsmtp</p></td>
<td></td>
<td></td>
<td><p>Specify BSMTP
batch file to
append to</p></td>
</tr>
<tr><td><p>preconnect</p></td>
<td></td>
<td></td>
<td><p>Command to be
executed before
each connection</p></td>
</tr>
<tr><td><p>postconnect</p></td>
<td></td>
<td></td>
<td><p>Command to be
executed after
each connection</p></td>
</tr>
<tr><td><p>keep</p></td>
<td><p>-k</p></td>
<td></td>
<td><p>Do not delete
seen messages
from server
(for POP3, uidl
is recommended)</p></td>
</tr>
<tr><td><p>flush</p></td>
<td><p>-F</p></td>
<td></td>
<td><p>Flush all seen
messages before
querying
(DANGEROUS)</p></td>
</tr>
<tr><td><p>limitflush</p></td>
<td></td>
<td></td>
<td><p>Flush all
oversized
messages before
querying</p></td>
</tr>
<tr><td><p>fetchall</p></td>
<td><p>-a</p></td>
<td></td>
<td><p>Fetch all
messages
whether seen or
not</p></td>
</tr>
<tr><td><p>rewrite</p></td>
<td></td>
<td></td>
<td><p>Rewrite
destination
addresses for
reply (default)</p></td>
</tr>
<tr><td><p>stripcr</p></td>
<td></td>
<td></td>
<td><p>Strip carriage
returns from
ends of lines</p></td>
</tr>
<tr><td><p>forcecr</p></td>
<td></td>
<td></td>
<td><p>Force carriage
returns at ends
of lines</p></td>
</tr>
<tr><td><p>pass8bits</p></td>
<td></td>
<td></td>
<td><p>Force
BODY=8BITMIME
to ESMTP
listener</p></td>
</tr>
<tr><td><p>dropstatus</p></td>
<td></td>
<td></td>
<td><p>Strip Status
and
X
-Mozilla-Status
lines out of
incoming mail</p></td>
</tr>
<tr><td><p>dropdelivered</p></td>
<td></td>
<td></td>
<td><p>Strip
Delivered-To
lines out of
incoming mail</p></td>
</tr>
<tr><td><p>mimedecode</p></td>
<td></td>
<td></td>
<td><p>Convert
q
uoted-printable
to 8-bit in
MIME messages</p></td>
</tr>
<tr><td><p>idle</p></td>
<td></td>
<td></td>
<td><p>Idle waiting
for new
messages after
each poll (IMAP
only)</p></td>
</tr>
<tr><td><p>no keep</p></td>
<td><p>-K</p></td>
<td></td>
<td><p>Delete seen
messages from
server
(default)</p></td>
</tr>
<tr><td><p>no flush</p></td>
<td></td>
<td></td>
<td><p>Do not flush
all seen
messages before
querying
(default)</p></td>
</tr>
<tr><td><p>no fetchall</p></td>
<td></td>
<td></td>
<td><p>Retrieve only
new messages
(default)</p></td>
</tr>
<tr><td><p>no rewrite</p></td>
<td></td>
<td></td>
<td><p>Do not rewrite
headers</p></td>
</tr>
<tr><td><p>no stripcr</p></td>
<td></td>
<td></td>
<td><p>Do not strip
carriage
returns
(default)</p></td>
</tr>
<tr><td><p>no forcecr</p></td>
<td></td>
<td></td>
<td><p>Do not force
carriage
returns at EOL
(default)</p></td>
</tr>
<tr><td><p>no pass8bits</p></td>
<td></td>
<td></td>
<td><p>Do not force
BODY=8BITMIME
to ESMTP
listener
(default)</p></td>
</tr>
<tr><td><p>no dropstatus</p></td>
<td></td>
<td></td>
<td><p>Do not drop
Status headers
(default)</p></td>
</tr>
<tr><td><p>no
dropdelivered</p></td>
<td></td>
<td></td>
<td><p>Do not drop
Delivered-To
headers
(default)</p></td>
</tr>
<tr><td><p>no mimedecode</p></td>
<td></td>
<td></td>
<td><p>Do not convert
q
uoted-printable
to 8-bit in
MIME messages
(default)</p></td>
</tr>
<tr><td><p>no idle</p></td>
<td></td>
<td></td>
<td><p>Do not idle
waiting for new
messages after
each poll (IMAP
only)</p></td>
</tr>
<tr><td><p>limit</p></td>
<td><p>-l</p></td>
<td></td>
<td><p>Set message
size limit</p></td>
</tr>
<tr><td><p>warnings</p></td>
<td><p>-w</p></td>
<td></td>
<td><p>Set message
size warning
interval</p></td>
</tr>
<tr><td><p>batchlimit</p></td>
<td><p>-b</p></td>
<td></td>
<td><p>Max # messages
to forward in
single connect</p></td>
</tr>
<tr><td><p>fetchlimit</p></td>
<td><p>-B</p></td>
<td></td>
<td><p>Max # messages
to fetch in
single connect</p></td>
</tr>
<tr><td><p>fetchsizelimit</p></td>
<td></td>
<td></td>
<td><p>Max # message
sizes to fetch
in single
transaction</p></td>
</tr>
<tr><td><p>fastuidl</p></td>
<td></td>
<td></td>
<td><p>Use binary
search for
first unseen
message (POP3
only)</p></td>
</tr>
<tr><td><p>expunge</p></td>
<td><p>-e</p></td>
<td></td>
<td><p>Perform an
expunge on
every #th
message (IMAP
and POP3 only)</p></td>
</tr>
<tr><td><p>properties</p></td>
<td></td>
<td></td>
<td><p>String value is
ignored by
fetchmail (may
be used by
extension
scripts)</p></td>
</tr>
</tbody>
</table>
<p>All user options must begin with a user description (user or username
option) and <em>follow</em> all server descriptions and options.</p>
<p>In the .fetchmailrc file, the 'envelope' string argument may be preceded
by a whitespace-separated number. This number, if specified, is the
number of such headers to skip over (that is, an argument of 1 selects
the second header of the given type). This is sometimes useful for
ignoring bogus envelope headers created by an ISP's local delivery agent
or internal forwards (through mail inspection systems, for instance).</p>
<section id="keywords-not-corresponding-to-option-switches">
<h3><a class="toc-backref" href="#toc-entry-38" role="doc-backlink">Keywords Not Corresponding To Option Switches</a></h3>
<p>The 'folder' and 'smtphost' options (unlike their command-line
equivalents) can take a space- or comma-separated list of names
following them.</p>
<p>All options correspond to the obvious command-line arguments, except the
following: 'via', 'interval', 'aka', 'is', 'to', 'dns'/'no dns',
'checkalias'/'no checkalias', 'password', 'preconnect', 'postconnect',
'localdomains', 'stripcr'/'no stripcr', 'forcecr'/'no forcecr',
'pass8bits'/'no pass8bits' 'dropstatus/no dropstatus', 'dropdelivered/no
dropdelivered', 'mimedecode/no mimedecode', 'no idle', and 'no
envelope'.</p>
<p>The 'via' option is for if you want to have more than one configuration
pointing at the same site. If it is present, the string argument will be
taken as the actual DNS name of the mail server host to query. This will
override the argument of poll, which can then simply be a distinct label
for the configuration (e.g., what you would give on the command line to
explicitly query this host).</p>
<p>The 'interval' option (which takes a numeric argument) allows you to
poll a server less frequently than the basic poll interval. If you say
'interval N' the server this option is attached to will only be queried
every N poll intervals.</p>
</section>
<section id="singledrop-versus-multidrop-options">
<h3><a class="toc-backref" href="#toc-entry-39" role="doc-backlink">Singledrop versus Multidrop options</a></h3>
<p>Please ensure you read the section titled <strong>THE USE AND ABUSE OF
MULTIDROP MAILBOXES</strong> if you intend to use multidrop mode.</p>
<p>The 'is' or 'to' keywords associate the following local (client) name(s)
(or server-name to client-name mappings separated by =) with the mail
server user name in the entry. If an is/to list has '*' as its last
name, unrecognized names are simply passed through. Note that until
<strong>fetchmail</strong> version 6.3.4 inclusively, these lists could only contain
local parts of user names (fetchmail would only look at the part before
the &#64; sign). <strong>fetchmail</strong> versions 6.3.5 and newer support full
addresses on the left hand side of these mappings, and they take
precedence over any 'localdomains', 'aka', 'via' or similar mappings.</p>
<p>A single local name can be used to support redirecting your mail when
your username on the client machine is different from your name on the
mail server. When there is only a single local name, mail is forwarded
to that local username regardless of the message's Received, To, Cc, and
Bcc headers. In this case, <strong>fetchmail</strong> never does DNS lookups.</p>
<p>When there is more than one local name (or name mapping), <strong>fetchmail</strong>
looks at the envelope header, if configured, and otherwise at the
Received, To, Cc, and Bcc headers of retrieved mail (this is 'multidrop
mode'). It looks for addresses with host name parts that match your poll
name or your 'via', 'aka' or 'localdomains' options, and usually also
for host name parts which DNS tells it are aliases of the mail server.
See the discussion of 'dns', 'checkalias', 'localdomains', and 'aka' for
details on how matching addresses are handled.</p>
<p>If <strong>fetchmail</strong> cannot match any mail server usernames or localdomain
addresses, the mail will be bounced. Normally it will be bounced to the
sender, but if the 'bouncemail' global option is off, the mail will go
to the local postmaster instead. (see the 'postmaster' global option).
See also BUGS.</p>
<p>The 'dns' option (normally on) controls the way addresses from multidrop
mailboxes are checked. On, it enables logic to check each host address
that does not match an 'aka' or 'localdomains' declaration by looking it
up with DNS. When a mail server username is recognized attached to a
matching host name part, its local mapping is added to the list of local
recipients.</p>
<p>The 'checkalias' option (normally off) extends the lookups performed by
the 'dns' keyword in multidrop mode, providing a way to cope with remote
MTAs that identify themselves using their canonical name, while they are
polled using an alias. When such a server is polled, checks to extract
the envelope address fail, and <strong>fetchmail</strong> reverts to delivery using
the To/Cc/Bcc headers (See below 'Header versus Envelope addresses').
Specifying this option instructs <strong>fetchmail</strong> to retrieve all the IP
addresses associated with both the poll name and the name used by the
remote MTA and to do a comparison of the IP addresses. This comes in
handy in situations where the remote server undergoes frequent canonical
name changes, that would otherwise require modifications to the rcfile.
'checkalias' has no effect if 'no dns' is specified in the rcfile.</p>
<p>The 'aka' option is for use with multidrop mailboxes. It allows you to
pre-declare a list of DNS aliases for a server. This is an optimization
hack that allows you to trade space for speed. When <strong>fetchmail</strong>, while
processing a multidrop mailbox, grovels through message headers looking
for names of the mail server, pre-declaring common ones can save it from
having to do DNS lookups. Note: the names you give as arguments to 'aka'
are matched as suffixes -- if you specify (say) 'aka netaxs.com', this
will match not just a host name netaxs.com, but any host name that ends
with '.netaxs.com'; such as (say) pop3.netaxs.com and mail.netaxs.com.</p>
<p>The 'localdomains' option allows you to declare a list of domains which
fetchmail should consider local. When fetchmail is parsing address lines
in multidrop modes, and a trailing segment of a host name matches a
declared local domain, that address is passed through to the listener or
MDA unaltered (local-name mappings are <em>not</em> applied).</p>
<p>If you are using 'localdomains', you may also need to specify 'no
envelope', which disables <strong>fetchmail</strong>'s normal attempt to deduce an
envelope address from the Received line or X-Envelope-To header or
whatever header has been previously set by 'envelope'. If you set 'no
envelope' in the defaults entry it is possible to undo that in
individual entries by using 'envelope &lt;string&gt;'. As a special case,
'envelope &quot;Received&quot;' restores the default parsing of Received lines.</p>
<p>The <strong>password</strong> option requires a string argument, which is the
password to be used with the entry's server.</p>
<p>The 'preconnect' keyword allows you to specify a shell command to be
executed just before each time <strong>fetchmail</strong> establishes a mail server
connection. This may be useful if you are attempting to set up secure
POP connections with the aid of <strong>ssh</strong>(1). If the command returns a
nonzero status, the poll of that mail server will be aborted.</p>
<p>Similarly, the 'postconnect' keyword similarly allows you to specify a
shell command to be executed just after each time a mail server
connection is taken down.</p>
<p>The 'forcecr' option controls whether lines terminated by LF only are
given CRLF termination before forwarding. Strictly speaking <a class="reference external" href="http://tools.ietf.org/html/rfc821.html">RFC821</a>
requires this, but few MTAs enforce the requirement so this option is
normally off (only one such MTA, qmail, is in significant use at time of
writing).</p>
<p>The 'stripcr' option controls whether carriage returns are stripped out
of retrieved mail before it is forwarded. It is normally not necessary
to set this, because it defaults to 'on' (CR stripping enabled) when
there is an MDA declared but 'off' (CR stripping disabled) when
forwarding is via SMTP. If 'stripcr' and 'forcecr' are both on,
'stripcr' will override.</p>
<p>The 'pass8bits' option exists to cope with Microsoft mail programs that
stupidly slap a &quot;Content-Transfer-Encoding: 7bit&quot; on everything. With
this option off (the default) and such a header present, <strong>fetchmail</strong>
declares BODY=7BIT to an ESMTP-capable listener; this causes problems
for messages actually using 8-bit ISO or KOI-8 character sets, which
will be garbled by having the high bits of all characters stripped. If
'pass8bits' is on, <strong>fetchmail</strong> is forced to declare BODY=8BITMIME to
any ESMTP-capable listener. If the listener is 8-bit-clean (as all the
major ones now are) the right thing will probably result.</p>
<p>The 'dropstatus' option controls whether nonempty Status and
X-Mozilla-Status lines are retained in fetched mail (the default) or
discarded. Retaining them allows your MUA to see what messages (if any)
were marked seen on the server. On the other hand, it can confuse some
new-mail notifiers, which assume that anything with a Status line in it
has been seen. (Note: the empty Status lines inserted by some buggy POP
servers are unconditionally discarded.)</p>
<p>The 'dropdelivered' option controls whether Delivered-To headers will be
kept in fetched mail (the default) or discarded. These headers are added
by qmail and Postfix mail servers in order to avoid mail loops but may
get in your way if you try to &quot;mirror&quot; a mail server within the same
domain. Use with caution.</p>
<p>The 'mimedecode' option controls whether MIME messages using the
quoted-printable encoding are automatically converted into pure 8-bit
data. If you are delivering mail to an ESMTP-capable, 8-bit-clean
listener (that includes all of the major MTAs like sendmail), then this
will automatically convert quoted-printable message headers and data
into 8-bit data, making it easier to understand when reading mail. If
your e-mail programs know how to deal with MIME messages, then this
option is not needed. The mimedecode option is off by default, because
doing <a class="reference external" href="http://tools.ietf.org/html/rfc2047.html">RFC2047</a> conversion on headers throws away character-set
information and can lead to bad results if the encoding of the headers
differs from the body encoding.</p>
<p>The 'idle' option is intended to be used with IMAP servers supporting
the <a class="reference external" href="http://tools.ietf.org/html/rfc2177.html">RFC2177</a> IDLE command extension, but does not strictly require it. If
it is enabled, and fetchmail detects that IDLE is supported, an IDLE
will be issued at the end of each poll. This will tell the IMAP server
to hold the connection open and notify the client when new mail is
available. If IDLE is not supported, fetchmail will simulate it by
periodically issuing NOOP. If you need to poll a link frequently, IDLE
can save bandwidth by eliminating TCP/IP connects and LOGIN/LOGOUT
sequences. On the other hand, an IDLE connection will eat almost all of
your fetchmail's time, because it will never drop the connection and
allow other polls to occur unless the server times out the IDLE. It also
does not work with multiple folders; only the first folder will ever be
polled.</p>
<p>The 'properties' option is an extension mechanism. It takes a string
argument, which is ignored by fetchmail itself. The string argument may
be used to store configuration information for scripts which require it.
In particular, the output of '--configdump' option will make properties
associated with a user entry readily available to a Python script.</p>
</section>
<section id="miscellaneous-run-control-options">
<h3><a class="toc-backref" href="#toc-entry-40" role="doc-backlink">Miscellaneous Run Control Options</a></h3>
<p>The words 'here' and 'there' have useful English-like significance.
Normally 'user eric is esr' would mean that mail for the remote user
'eric' is to be delivered to 'esr', but you can make this clearer by
saying 'user eric there is esr here', or reverse it by saying 'user esr
here is eric there'</p>
<p>Legal protocol identifiers for use with the 'protocol' keyword are:</p>
<pre class="literal-block">auto (or AUTO) (legacy, to be removed from future release)
pop2 (or POP2) (legacy, to be removed from future release)
pop3 (or POP3)
sdps (or SDPS)
imap (or IMAP)
apop (or APOP)
kpop (or KPOP)</pre>
<p>Legal authentication types are 'any', 'password', 'kerberos',
'kerberos_v4', 'kerberos_v5' and 'gssapi', 'cram-md5', 'otp', 'msn'
(only for POP3), 'ntlm', 'ssh', 'external' (only IMAP). The 'password'
type specifies authentication by normal transmission of a password (the
password may be plain text or subject to protocol-specific encryption as
in CRAM-MD5); 'kerberos' tells <strong>fetchmail</strong> to try to get a Kerberos
ticket at the start of each query instead, and send an arbitrary string
as the password; and 'gssapi' tells fetchmail to use GSSAPI
authentication. See the description of the 'auth' keyword for more.</p>
<p>Specifying 'kpop' sets POP3 protocol over port 1109 with Kerberos V4
authentication. These defaults may be overridden by later options.</p>
<p>There are some global option statements: 'set logfile' followed by a
string sets the same global specified by --logfile. A command-line
--logfile option will override this. Note that --logfile is only
effective if fetchmail detaches itself from the terminal and the logfile
already exists before fetchmail is run, and it overrides --syslog in
this case. Also, 'set daemon' sets the poll interval as --daemon does.
This can be overridden by a command-line --daemon option; in particular
--daemon 0 can be used to force foreground operation. The 'set
postmaster' statement sets the address to which multidrop mail defaults
if there are no local matches. Finally, 'set syslog' sends log messages
to syslogd(8).</p>
</section>
</section>
<section id="debugging-fetchmail">
<h2><a class="toc-backref" href="#toc-entry-41" role="doc-backlink">DEBUGGING FETCHMAIL</a></h2>
<section id="fetchmail-crashing">
<h3><a class="toc-backref" href="#toc-entry-42" role="doc-backlink">Fetchmail crashing</a></h3>
<p>There are various ways in that fetchmail may &quot;crash&quot;, i. e. stop
operation suddenly and unexpectedly. A &quot;crash&quot; usually refers to an
error condition that the software did not handle by itself. A well-known
failure mode is the &quot;segmentation fault&quot; or &quot;signal 11&quot; or &quot;SIGSEGV&quot; or
just &quot;segfault&quot; for short. These can be caused by hardware or by
software problems. Software-induced segfaults can usually be reproduced
easily and in the same place, whereas hardware-induced segfaults can go
away if the computer is rebooted, or powered off for a few hours, and
can happen in random locations even if you use the software the same
way.</p>
<p>For solving hardware-induced segfaults, find the faulty component and
repair or replace it. <a class="reference external" href="https://www.bitwizard.nl/sig11/">The Sig11
FAQ</a> may help you with details.</p>
<p>For solving software-induced segfaults, the developers may need a &quot;stack
backtrace&quot;.</p>
</section>
<section id="enabling-fetchmail-core-dumps">
<h3><a class="toc-backref" href="#toc-entry-43" role="doc-backlink">Enabling fetchmail core dumps</a></h3>
<p>By default, fetchmail suppresses core dumps as these might contain
passwords and other sensitive information. For debugging fetchmail
crashes, obtaining a &quot;stack backtrace&quot; from a core dump is often the
quickest way to solve the problem, and when posting your problem on a
mailing list, the developers may ask you for a &quot;backtrace&quot;.</p>
<p>1. To get useful backtraces, fetchmail needs to be installed without
getting stripped of its compilation symbols. Unfortunately, most binary
packages that are installed are stripped, and core files from
symbol-stripped programs are worthless. So you may need to recompile
fetchmail. On many systems, you can type</p>
<pre class="literal-block">file `which fetchmail`</pre>
<p>to find out if fetchmail was symbol-stripped or not. If yours was
unstripped, fine, proceed, if it was stripped, you need to recompile the
source code first. You do not usually need to install fetchmail in order
to debug it.</p>
<p>2. The shell environment that starts fetchmail needs to enable core
dumps. The key is the &quot;maximum core (file) size&quot; that can usually be
configured with a tool named &quot;limit&quot; or &quot;ulimit&quot;. See the documentation
for your shell for details. In the popular bash shell, &quot;ulimit -Sc
unlimited&quot; will allow the core dump.</p>
<p>3. You need to tell fetchmail, too, to allow core dumps. To do this, run
fetchmail with the <strong>-d0 -v</strong> options. It is often easier to also add
<strong>--nosyslog -N</strong> as well.</p>
<p>Finally, you need to reproduce the crash. You can just start fetchmail
from the directory where you compiled it by typing <strong>./fetchmail</strong>, so
the complete command line will start with <strong>./fetchmail -Nvd0</strong>
--nosyslog and perhaps list your other options.</p>
<p>After the crash, run your debugger to obtain the core dump. The debugger
will often be GNU GDB, you can then type (adjust paths as necessary)
<strong>gdb ./fetchmail fetchmail.core</strong> and then, after GDB has started up
and read all its files, type <strong>backtrace full</strong>, save the output (copy &amp;
paste will do, the backtrace will be read by a human) and then type
<strong>quit</strong> to leave gdb. <strong>Note:</strong> on some systems, the core files have
different names, they might contain a number instead of the program
name, or number and name, but it will usually have &quot;core&quot; as part of
their name.</p>
</section>
</section>
<section id="interaction-with-rfc-822">
<h2>INTERACTION WITH <a class="reference external" href="http://tools.ietf.org/html/rfc822.html">RFC 822</a></h2>
<p>When trying to determine the originating address of a message, fetchmail
looks through headers in the following order:</p>
<pre class="literal-block">Return-Path:
Resent-Sender: (ignored if it does not contain an &#64; or !)
Sender: (ignored if it does not contain an &#64; or !)
Resent-From:
From:
Reply-To:
Apparently-From:</pre>
<p>The originating address is used for logging, and to set the MAIL FROM
address when forwarding to SMTP. This order is intended to cope
gracefully with receiving mailing list messages in multidrop mode. The
intent is that if a local address does not exist, the bounce message
will not be returned blindly to the author or to the list itself, but
rather to the list manager (which is less annoying).</p>
<p>In multidrop mode, destination headers are processed as follows: First,
fetchmail looks for the header specified by the 'envelope' option in
order to determine the local recipient address. If the mail is addressed
to more than one recipient, the Received line will not contain any
information regarding recipient addresses.</p>
<p>Then fetchmail looks for the Resent-To:, Resent-Cc:, and Resent-Bcc:
lines. If they exist, they should contain the final recipients and have
precedence over their To:/Cc:/Bcc: counterparts. If the Resent-* lines
do not exist, the To:, Cc:, Bcc: and Apparently-To: lines are looked
for. (The presence of a Resent-To: is taken to imply that the person
referred by the To: address has already received the original copy of
the mail.)</p>
</section>
<section id="configuration-examples">
<h2><a class="toc-backref" href="#toc-entry-45" role="doc-backlink">CONFIGURATION EXAMPLES</a></h2>
<p>Note that although there are password declarations in a good many of the
examples below, this is mainly for illustrative purposes. We recommend
stashing account/password pairs in your $HOME/.netrc file, where they
can be used not just by fetchmail but by ftp(1) and other programs.</p>
<p>The basic format is:</p>
<blockquote>
<p>poll <em>SERVERNAME</em> protocol <em>PROTOCOL</em> username <em>NAME</em> password
<em>PASSWORD</em></p>
</blockquote>
<p>Example:</p>
<pre class="literal-block">poll pop.provider.net protocol pop3 username &quot;jsmith&quot; password &quot;secret1&quot;</pre>
<p>Or, using some abbreviations:</p>
<pre class="literal-block">poll pop.provider.net proto pop3 user &quot;jsmith&quot; password &quot;secret1&quot;</pre>
<p>Multiple servers may be listed:</p>
<pre class="literal-block">poll pop.provider.net proto pop3 user &quot;jsmith&quot; pass &quot;secret1&quot;
poll other.provider.net proto pop2 user &quot;John.Smith&quot; pass &quot;My^Hat&quot;</pre>
<p>Here is the same version with more whitespace and some noise words:</p>
<pre class="literal-block">poll pop.provider.net proto pop3
     user &quot;jsmith&quot;, with password secret1, is &quot;jsmith&quot; here;
poll other.provider.net proto pop2:
     user &quot;John.Smith&quot;, with password &quot;My^Hat&quot;, is &quot;John.Smith&quot; here;</pre>
<p>If you need to include whitespace in a parameter string or start the
latter with a number, enclose the string in double quotes. Thus:</p>
<pre class="literal-block">poll mail.provider.net with proto pop3:
     user &quot;jsmith&quot; there has password &quot;4u but u cannot krak this&quot;
     is jws here and wants mda &quot;/bin/mail&quot;</pre>
<p>You may have an initial server description headed by the keyword
'defaults' instead of 'poll' followed by a name. Such a record is
interpreted as defaults for all queries to use. It may be overwritten by
individual server descriptions. So, you could write:</p>
<pre class="literal-block">defaults proto pop3
     user &quot;jsmith&quot;
poll pop.provider.net
     pass &quot;secret1&quot;
poll mail.provider.net
     user &quot;jjsmith&quot; there has password &quot;secret2&quot;</pre>
<p>It is possible to specify more than one user per server. The 'user'
keyword leads off a user description, and every user specification in a
multi-user entry must include it. Here is an example:</p>
<pre class="literal-block">poll pop.provider.net proto pop3 port 3111
     user &quot;jsmith&quot; with pass &quot;secret1&quot; is &quot;smith&quot; here
     user jones with pass &quot;secret2&quot; is &quot;jjones&quot; here keep</pre>
<p>This associates the local username 'smith' with the pop.provider.net
username 'jsmith' and the local username 'jjones' with the
pop.provider.net username 'jones'. Mail for 'jones' is kept on the
server after download.</p>
<p>Here is what a simple retrieval configuration for a multidrop mailbox
looks like:</p>
<pre class="literal-block">poll pop.provider.net:
     user maildrop with pass secret1 to golux 'hurkle'='happy' snark here</pre>
<p>This says that the mailbox of account 'maildrop' on the server is a
multidrop box, and that messages in it should be parsed for the server
user names 'golux', 'hurkle', and 'snark'. It further specifies that
'golux' and 'snark' have the same name on the client as on the server,
but mail for server user 'hurkle' should be delivered to client user
'happy'.</p>
<p><strong>Note</strong> that <strong>fetchmail,</strong> until version 6.3.4, did NOT allow full
<a class="reference external" href="mailto:user&#64;domain">user&#64;domain</a> specifications here, these would never match. <em>Fetchmail</em>
6.3.5 and newer support <a class="reference external" href="mailto:user&#64;domain">user&#64;domain</a> specifications on the left-hand side
of a user mapping.</p>
<p>Here is an example of another kind of multidrop connection:</p>
<pre class="literal-block">poll pop.provider.net localdomains loonytoons.org toons.org
     envelope X-Envelope-To
     user maildrop with pass secret1 to * here</pre>
<p>This also says that the mailbox of account 'maildrop' on the server is a
multidrop box. It tells fetchmail that any address in the loonytoons.org
or toons.org domains (including sub-domain addresses like
<a class="reference external" href="mailto:'joe&#64;daffy.loonytoons.org">'joe&#64;daffy.loonytoons.org</a>') should be passed through to the local SMTP
listener without modification. Be careful of mail loops if you do this!</p>
<p>Here is an example configuration using ssh and the plugin option. The
queries are made directly on the stdin and stdout of imapd via ssh. Note
that in this setup, IMAP authentication can be skipped.</p>
<pre class="literal-block">poll mailhost.net with proto imap:
     plugin &quot;ssh %h /usr/sbin/imapd&quot; auth ssh;
     user esr is esr here</pre>
</section>
<section id="the-use-and-abuse-of-multidrop-mailboxes">
<h2><a class="toc-backref" href="#toc-entry-46" role="doc-backlink">THE USE AND ABUSE OF MULTIDROP MAILBOXES</a></h2>
<p>Use the multiple-local-recipients feature with caution -- it can bite.
All multidrop features are ineffective in ETRN and ODMR modes.</p>
<p>Also, note that in multidrop mode duplicate mails may be suppressed. A
piece of mail is considered duplicate if it does not have a discernible
envelope recipient address, has the same header as the message
immediately preceding and more than one addressee. Such runs of messages
may be generated when copies of a message addressed to multiple users
are delivered to a multidrop box. (To be precise, fetchmail 6.2.5
through 6.4.X use an MD5 hash of the raw message header, and only
fetchmail 6.4.16+ document this properly. Fetchmail 5.0.8 (1999-09-14)
through 6.2.4 used only the Message-ID header. 5.0.7 and older did not
suppress duplicates.)</p>
<p>Note that this duplication killer code checking the entire header is
very restrictive and may not suppress many duplicates in practice - for
instance, if some X-Original-To or Delivered-To header differs. This is
intentional and correct in such situations: wherever envelope
information is available, it should be used for reliable delivery of
mailing list and blind carbon copy (Bcc) messages. See the subsection
Duplicate suppression below for suggestions.</p>
<section id="header-versus-envelope-addresses">
<h3><a class="toc-backref" href="#toc-entry-47" role="doc-backlink">Header versus Envelope addresses</a></h3>
<p>The fundamental problem is that by having your mail server toss several
peoples' mail in a single maildrop box, you may have thrown away
potentially vital information about who each piece of mail was actually
addressed to (the 'envelope address', as opposed to the header addresses
in the <a class="reference external" href="http://tools.ietf.org/html/rfc822.html">RFC822</a> To/Cc headers - the Bcc is not available at the receiving
end). This 'envelope address' is the address you need in order to
reroute mail properly.</p>
<p>Sometimes <strong>fetchmail</strong> can deduce the envelope address. If the mail
server MTA is <strong>sendmail</strong> and the item of mail had just one recipient,
the MTA will have written a 'by/for' clause that gives the envelope
addressee into its Received header. But this does not work reliably for
other MTAs, nor if there is more than one recipient. By default,
<strong>fetchmail</strong> looks for envelope addresses in these lines; you can
restore this default with -E &quot;Received&quot; or 'envelope Received'.</p>
<p><strong>As a better alternative,</strong> some SMTP listeners and/or mail servers
insert a header in each message containing a copy of the envelope
addresses. This header (when it exists) is often 'X-Original-To',
'Delivered-To' or 'X-Envelope-To'. Fetchmail's assumption about this can
be changed with the -E or 'envelope' option. Note that writing an
envelope header of this kind exposes the names of recipients (including
blind-copy recipients) to all receivers of the messages, so the upstream
must store one copy of the message per recipient to avoid becoming a
privacy problem.</p>
<p>Postfix, since version 2.0, writes an X-Original-To: header which
contains a copy of the envelope as it was received.</p>
<p>Qmail and Postfix generally write a 'Delivered-To' header upon
delivering the message to the mail spool and use it to avoid mail loops.
Qmail virtual domains however will prefix the user name with a string
that normally matches the user's domain. To remove this prefix you can
use the -Q or 'qvirtual' option.</p>
<p>Sometimes, unfortunately, neither of these methods works. That is the
point when you should contact your ISP and ask them to provide such an
envelope header, and you should not use multidrop in this situation.
When they all fail, fetchmail must fall back on the contents of To/Cc
headers (Bcc headers are not available - see below) to try to determine
recipient addressees -- and these are unreliable. In particular,
mailing-list software often ships mail with only the list broadcast
address in the To: header.</p>
<p><strong>Note that a future version of fetchmail may remove To/Cc parsing!</strong></p>
<p>When <strong>fetchmail</strong> cannot deduce a recipient address that is local, and
the intended recipient address was anyone other than fetchmail's
invoking user, <strong>mail will get lost.</strong> This is what makes the multidrop
feature risky without proper envelope information.</p>
<p>A related problem is that when you blind-copy a mail message, the Bcc
information is carried <em>only</em> <strong>as envelope address (it is removed
from</strong> the headers by the sending mail server, so fetchmail can see it
only if there is an X-Envelope-To header). Thus, blind-copying to
someone who gets mail over a fetchmail multidrop link will fail unless
the mail server host routinely writes X-Envelope-To or an equivalent
header into messages in your maildrop.</p>
<p><strong>In conclusion, mailing lists and Bcc'd mail can only work if the</strong>
server you are fetching from</p>
<ol class="arabic simple">
<li><p><strong>stores one copy of the message per recipient in your domain and</strong></p></li>
<li><p><strong>records the envelope information in a special header
(X-Original-To,</strong> Delivered-To, X-Envelope-To).</p></li>
</ol>
</section>
<section id="good-ways-to-use-multidrop-mailboxes">
<h3><a class="toc-backref" href="#toc-entry-48" role="doc-backlink">Good Ways To Use Multidrop Mailboxes</a></h3>
<p>Multiple local names can be used to administer a mailing list from the
client side of a <strong>fetchmail collection. Suppose your name is</strong> 'esr',
and you want to both pick up your own mail and maintain a mailing list
called (say) &quot;fetchmail-friends&quot;, and you want to keep the alias list on
your client machine.</p>
<p>On your server, you can alias 'fetchmail-friends' to 'esr'; then, in
your <em>.fetchmailrc</em><strong>, declare 'to esr fetchmail-friends here'.</strong>
Then, when mail including 'fetchmail-friends' as a local address gets
fetched, the list name will be appended to the list of recipients your
SMTP listener sees. Therefore it will undergo alias expansion locally.
Be sure to include 'esr' in the local alias expansion of
fetchmail-friends, or you will never see mail sent only to the list.
Also be sure that your listener has the &quot;me-too&quot; option set (sendmail's
-oXm command-line option or OXm declaration) so your name is not removed
from alias expansions in messages you send.</p>
<p>This trick is not without its problems, however. You will begin to see
this when a message comes in that is addressed only to a mailing list
you do <em>not</em> <strong>have declared as a local name. Each such message</strong> will
feature an 'X-Fetchmail-Warning' header which is generated because
fetchmail cannot find a valid local name in the recipient addresses.
Such messages default (as was described above) to being sent to the
local user running <strong>fetchmail, but the program has no</strong> way to know
that this is actually the right thing.</p>
</section>
<section id="bad-ways-to-abuse-multidrop-mailboxes">
<h3><a class="toc-backref" href="#toc-entry-49" role="doc-backlink">Bad Ways To Abuse Multidrop Mailboxes</a></h3>
<p>Multidrop mailboxes and <strong>fetchmail</strong> serving multiple users in daemon
mode do not mix. The problem, again, is mail from mailing lists, which
typically does not have an individual recipient address on it. Unless
<strong>fetchmail</strong> can deduce an envelope address, such mail will only go to
the account running fetchmail (probably root). Also, blind-copied users
are very likely never to see their mail at all.</p>
<p>If you are tempted to use <strong>fetchmail</strong> to retrieve mail for multiple
users from a single mail drop via POP or IMAP, think again (and reread
the section on header and envelope addresses above). It would be smarter
to just let the mail sit in the mail server's queue and use fetchmail's
ETRN or ODMR modes to trigger SMTP sends periodically (of course, this
means you have to poll more frequently than the mail server's expiry
period). If you cannot arrange this, try setting up a UUCP feed.</p>
<p>If you absolutely <em>must</em> <strong>use multidrop for this purpose, make sure</strong>
your mail server writes an envelope-address header that fetchmail can
see. Otherwise you <em>will</em> <strong>lose mail and it</strong> <em>will</em> <strong>come back</strong> to
haunt you.</p>
</section>
<section id="speeding-up-multidrop-checking">
<h3><a class="toc-backref" href="#toc-entry-50" role="doc-backlink">Speeding Up Multidrop Checking</a></h3>
<p>Normally, when multiple users are declared <strong>fetchmail</strong> extracts
recipient addresses as described above and checks each host part with
DNS to see if it is an alias of the mail server. If so, the name
mappings described in the &quot;to ... here&quot; declaration are done and the
mail locally delivered.</p>
<p>This is a convenient but also slow method. To speed it up, pre-declare
mail server aliases with 'aka'; these are checked before DNS lookups are
done. If you are certain your aka list contains <strong>all</strong> DNS aliases of
the mail server (and all MX names pointing at it - note this may change
in a future version) you can declare 'no dns' to suppress DNS lookups
entirely and <em>only</em> <strong>match against the aka list.</strong></p>
</section>
<section id="duplicate-suppression-on-multidrop">
<h3><a class="toc-backref" href="#toc-entry-51" role="doc-backlink">Duplicate suppression on multidrop</a></h3>
<p>If fetchmail's duplicate suppression code does not kick in for your
multidrop mail account, other options is using sieve, or for instance
Courier's maildrop package (and in particular, its reformail program
with the -D option) as the delivery agent (either from fetchmail, or
from your local mail server that fetchmail injects into).</p>
</section>
</section>
<section id="socks">
<h2><a class="toc-backref" href="#toc-entry-52" role="doc-backlink">SOCKS</a></h2>
<p>Support for socks4/5 is a <strong>compile time configuration option. Once</strong>
compiled in, fetchmail will always use the socks libraries and
configuration on your system, there are no run-time switches in
fetchmail - but you can still configure SOCKS: you can specify which
SOCKS configuration file is used in the <strong>SOCKS_CONF environment</strong>
variable.</p>
<p>For instance, if you wanted to bypass the SOCKS proxy altogether and
have fetchmail connect directly, you could just pass
SOCKS_CONF=/dev/null in the environment, for example (add your usual
command line options - if any - to the end of this line):</p>
<pre class="literal-block">env SOCKS_CONF=/dev/null fetchmail</pre>
</section>
<section id="exit-codes">
<h2><a class="toc-backref" href="#toc-entry-53" role="doc-backlink">EXIT CODES</a></h2>
<p>To facilitate the use of <strong>fetchmail</strong> in shell scripts, an exit status
code is returned to give an indication of what occurred during a given
connection.</p>
<p>The exit codes returned by <strong>fetchmail</strong> are as follows:</p>
<ol class="arabic simple" start="0">
<li><p>One or more messages were successfully retrieved (or, if the -c
option was selected, were found waiting but not retrieved).</p></li>
<li><p>There was no mail awaiting retrieval. (There may have been old mail
still on the server but not selected for retrieval.) If you do not
want &quot;no mail&quot; to be an error condition (for instance, for cron
jobs), use a POSIX-compliant shell and add</p></li>
</ol>
<pre class="literal-block">|| [ $? -eq 1 ]</pre>
<p>to the end of the fetchmail command line, note that this leaves 0
untouched, maps 1 to 0, and maps all other codes to 1. See also item #C8
in the FAQ.</p>
<ol class="arabic simple" start="2">
<li><p>An error was encountered when attempting to open a socket to
retrieve mail. If you do not know what a socket is, do not worry
about it -- just treat this as an 'unrecoverable error'. This error
can also be because a protocol fetchmail wants to use is not listed
in /etc/services.</p></li>
<li><p>The user authentication step failed. This usually means that a bad
user-id, password, or APOP id was specified. Or it may mean that you
tried to run fetchmail under circumstances where it did not have
standard input attached to a terminal and could not prompt for a
missing password.</p></li>
<li><p>Some sort of fatal protocol error was detected.</p></li>
<li><p>There was a syntax error in the arguments to <strong>fetchmail, or a pre-
or post-connect command failed.</strong></p></li>
<li><p>The run control file had bad permissions.</p></li>
<li><p>There was an error condition reported by the server. Can also fire
if <strong>fetchmail timed out while waiting for the server.</strong></p></li>
<li><p>Client-side exclusion error. This means <strong>fetchmail</strong> either found
another copy of itself already running, or failed in such a way that
it is not sure whether another copy is running.</p></li>
<li><p>The user authentication step failed because the server responded
&quot;lock busy&quot;. Try again after a brief pause! This error is not
implemented for all protocols, nor for all servers. If not
implemented for your server, &quot;3&quot; will be returned instead, see
above. May be returned when talking to qpopper or other servers that
can respond with &quot;lock busy&quot; or some similar text containing the
word &quot;lock&quot;.</p></li>
<li><p>The <strong>fetchmail</strong> run failed while trying to do an SMTP port open or
transaction.</p></li>
<li><p>Fatal DNS error. Fetchmail encountered an error while performing a
DNS lookup at startup and could not proceed.</p></li>
<li><p>BSMTP batch file could not be opened.</p></li>
<li><p>Poll terminated by a fetch limit (see the --fetchlimit option).</p></li>
<li><p>Server busy indication.</p></li>
<li><p>Internal error. You should see a message on standard error with
details.</p></li>
</ol>
<dl class="simple">
<dt>24 - 26, 28, 29</dt>
<dd><p>These are internal codes and should not appear externally.</p>
</dd>
</dl>
<p>When <strong>fetchmail</strong> queries more than one host, return status is 0 if
<em>any</em> <strong>query</strong> successfully retrieved mail. Otherwise the returned
error status is that of the last host queried.</p>
</section>
<section id="files">
<h2><a class="toc-backref" href="#toc-entry-54" role="doc-backlink">FILES</a></h2>
<dl class="simple">
<dt>~/.fetchmailrc, $HOME/.fetchmailrc, $HOME_ETC/.fetchmailrc, $FETCHMAILHOME/fetchmailrc</dt>
<dd><p>default run control file (location can be overridden with environment
variables)</p>
</dd>
<dt>~/.fetchids, $HOME/.fetchids, $HOME_ETC/.fetchids, $FETCHMAILHOME/.fetchids</dt>
<dd><p>default location of file recording last message UIDs seen per host.
(location can be overridden with environment variables)</p>
</dd>
<dt>~/.fetchmail.pid, $HOME/.fetchmail.pid, $HOME_ETC/.fetchmail.pid, $FETCHMAILHOME/fetchmail.pid</dt>
<dd><p>default location of lock file (sometimes called pidfile or PID file,
see option pidfile) to help prevent concurrent runs (non-root mode).
(location can be overridden with environment variables)</p>
</dd>
<dt>~/.netrc, $HOME/.netrc, $HOME_ETC/.netrc</dt>
<dd><p>your FTP run control file, which (if present) will be searched for
passwords as a last resort before prompting for one interactively.
(location can be overridden with environment variables)</p>
</dd>
<dt>/var/run/fetchmail.pid</dt>
<dd><p>lock file (pidfile) to help prevent concurrent runs (root mode, Linux
systems).</p>
</dd>
<dt>/etc/fetchmail.pid</dt>
<dd><p>lock file (pidfile) to help prevent concurrent runs (root mode,
systems without /var/run).</p>
</dd>
</dl>
</section>
<section id="environment">
<h2><a class="toc-backref" href="#toc-entry-55" role="doc-backlink">ENVIRONMENT</a></h2>
<p>Fetchmail's behavior can be altered by providing it with environment
variables. Some may alter the operation of libraries that fetchmail
links against, for instance, OpenSSL. Note that in daemon mode, you will
need to quit the background daemon process and start a new fetchmail
daemon for environment changes to take effect.</p>
<dl class="simple">
<dt>FETCHMAILHOME</dt>
<dd><p>If this environment variable is set to a valid and existing directory
name, fetchmail will read $FETCHMAILHOME/fetchmailrc (the dot is
missing in this case), $FETCHMAILHOME/.fetchids (keeping its dot) and
$FETCHMAILHOME/fetchmail.pid (without dot) rather than from the
user's home directory. The .netrc file is always looked for in the
invoking user's home directory (or $HOME_ETC) regardless of
FETCHMAILHOME's setting.</p>
</dd>
<dt>FETCHMAILUSER</dt>
<dd><p>If this environment variable is set, it is used as the name of the
calling user (default local name) for purposes such as mailing error
notifications. Otherwise, if either the LOGNAME or USER variable is
correctly set (e.g., the corresponding UID matches the session user
ID) then that name is used as the default local name. Otherwise
<strong>getpwuid(3) must be able to retrieve a password entry for the</strong>
session ID (this elaborate logic is designed to handle the case of
multiple names per user ID gracefully).</p>
</dd>
<dt>FETCHMAIL_DISABLE_CBC_IV_COUNTERMEASURE</dt>
<dd><p>(since v6.3.22): If this environment variable is set and not empty,
fetchmail will disable a countermeasure against an SSL CBC IV attack
(by setting SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS). This is a security
risk, but may be necessary for connecting to certain
non-standards-conforming servers. See fetchmail's NEWS file and
fetchmail-SA-2012-01.txt for details. Earlier fetchmail versions
(v6.3.21 and older) used to disable this countermeasure, but v6.3.22
no longer does that as a safety precaution.</p>
</dd>
<dt>FETCHMAIL_POP3_FORCE_RETR</dt>
<dd><p>(since v6.3.9): If this environment variable is defined at all (even
if empty), fetchmail will forgo the POP3 TOP command and always use
RETR. This can be used as a workaround when TOP does not work
properly.</p>
</dd>
<dt>FETCHMAIL_INCLUDE_DEFAULT_X509_CA_CERTS</dt>
<dd><p>(since v6.3.17): If this environment variable is set and not empty,
fetchmail will always load the default X.509 trusted certificate
locations for SSL/TLS CA certificates, even if <strong>--sslcertfile and
--sslcertpath are given.</strong> The latter locations take precedence over
the system default locations. This is useful in case there are broken
certificates in the system directories and the user has no
administrator privileges to remedy the problem.</p>
</dd>
<dt>FETCHMAIL_WOLFSSL_DEBUG</dt>
<dd><p>(since v6.4.25): If fetchmail is compiled and linked with wolfSSL, if
wolfSSL was built with --enable-debug, and if this environment
variable is set and not empty, then enable wolfSSL's debug mode. This
will emit huge amounts of debug output to stderr.</p>
</dd>
<dt>HOME</dt>
<dd><p>(documented since 6.4.1): This variable is normally set to the user's
home directory. If it is set to a different directory than what is in
the password database, HOME takes precedence.</p>
</dd>
<dt>HOME_ETC</dt>
<dd><p>(documentation corrected to match behaviour of code since 6.4.1): If
the HOME_ETC variable is set, it will override fetchmail's idea of
$HOME, i. e. fetchmail will read .fetchmailrc, .fetchids,
.fetchmail.pid and .netrc from $HOME_ETC instead of $HOME (or if HOME
is also unset, from the passwd file's home directory location).</p>
</dd>
</dl>
<p>If HOME_ETC and FETCHMAILHOME are both set, FETCHMAILHOME takes
precedence and HOME_ETC will be ignored.</p>
<dl class="simple">
<dt>SOCKS_CONF</dt>
<dd><p>(only if SOCKS support is compiled in) this variable is used by the
socks library to find out which configuration file it should read.
Set this to /dev/null to bypass the SOCKS proxy.</p>
</dd>
<dt>SSL_CERT_DIR</dt>
<dd><p>(with truly OpenSSL 1.1.1 compatible library): overrides OpenSSL's
idea of the default trust directory or path (which contains
individual certificate files and hashed symlinks), see the
SSL_CTX_set_default_verify_paths(3) manual page for details, it may
be in the openssl development package. If using another library's
OpenSSL compatibility interface, this may not work. Since this
variable only specifies a default value, the option --sslcertpath
takes precedence if given.</p>
</dd>
<dt>SSL_CERT_FILE</dt>
<dd><p>(with truly OpenSSL 1.1.1 compatible library): overrides OpenSSL's
idea of the default trust certificate bundle file (which contains a
concatenation of base64-encoded certificates in PEM format), see the
SSL_CTX_set_default_verify_paths(3) manual page for details, it may
be in the openssl development package. If using another library's
OpenSSL compatibility interface, this may not work. Since this
variable only specifies a default value, the option --sslcertfile
takes precedence if given.</p>
</dd>
</dl>
</section>
<section id="signals">
<h2><a class="toc-backref" href="#toc-entry-56" role="doc-backlink">SIGNALS</a></h2>
<p>If a <strong>fetchmail daemon is running as root, SIGUSR1 wakes it up from
its</strong> sleep phase and forces a poll of all non-skipped servers. For
compatibility reasons, SIGHUP can also be used in 6.3.X but may not be
available in future fetchmail versions.</p>
<p>If <strong>fetchmail is running in daemon mode as non-root, use SIGUSR1 to
wake</strong> it (this is so SIGHUP due to logout can retain the default action
of killing it).</p>
<p>Running <strong>fetchmail in foreground while a background fetchmail is</strong>
running will do whichever of these is appropriate to wake it up.</p>
</section>
<section id="bugs-limitations-and-known-problems">
<h2><a class="toc-backref" href="#toc-entry-57" role="doc-backlink">BUGS, LIMITATIONS, AND KNOWN PROBLEMS</a></h2>
<p>Please check the <strong>NEWS file that shipped with fetchmail for more</strong>
known bugs than those listed here.</p>
<p>Fetchmail cannot handle user names that contain blanks after a &quot;&#64;&quot;
character, for instance &quot;<a class="reference external" href="mailto:demonstr&#64;ti">demonstr&#64;ti</a> on&quot;. These are rather uncommon and
only hurt when using UID-based --keep setups, so the 6.X.Y versions of
fetchmail will not be fixed.</p>
<p>Fetchmail cannot handle configurations where you have multiple accounts
that use the same server name and the same login. Any <a class="reference external" href="mailto:user&#64;server">user&#64;server</a>
combination must be unique.</p>
<p>The assumptions that the DNS and in particular the checkalias options
make are not often sustainable. For instance, it has become uncommon for
an MX server to be a POP3 or IMAP server at the same time. Therefore the
MX lookups may go away in a future release.</p>
<p>The mda and plugin options interact badly. In order to collect error
status from the MDA, fetchmail has to change its normal signal handling
so that dead plugin processes do not get reaped until the end of the
poll cycle. This can cause resource starvation if too many zombies
accumulate. So either do not deliver to a MDA using plugins or risk
being overrun by an army of undead.</p>
<p>The --interface option does not support IPv6 and it is doubtful if it
ever will, since there is no portable way to query interface IPv6
addresses.</p>
<p>The <a class="reference external" href="http://tools.ietf.org/html/rfc822.html">RFC822</a> address parser used in multidrop mode chokes on some
&#64;-addresses that are technically legal but bizarre. Strange uses of
quoting and embedded comments are likely to confuse it.</p>
<p>In a message with multiple envelope headers, only the last one processed
will be visible to fetchmail.</p>
<p>Use of some of these protocols requires that the program send
unencrypted passwords over the TCP/IP connection to the mail server.
This creates a risk that name/password pairs might be snaffled with a
packet sniffer or more sophisticated monitoring software. Under Linux
and FreeBSD, the --interface option can be used to restrict polling to
availability of a specific interface device with a specific local or
remote IP address, but snooping is still possible if (a) either host has
a network device that can be opened in promiscuous mode, or (b) the
intervening network link can be tapped. We recommend the use of
<strong>ssh</strong>(1) tunnelling to not only shroud your passwords but encrypt
the entire conversation.</p>
<p>Use of the %F or %T escapes in an mda option could open a security hole,
because they pass text manipulable by an attacker to a shell command.
Potential shell characters are replaced by '_' before execution. The
hole is further reduced by the fact that fetchmail temporarily discards
any set-uid privileges it may have while running the MDA. For maximum
safety, however, do not use an mda command containing %F or %T when
fetchmail is run from the root account itself.</p>
<p>Fetchmail's method of sending bounces due to errors or spam-blocking and
spam bounces requires that port 25 of localhost be available for sending
mail via SMTP.</p>
<p>If you modify <em>~/.fetchmailrc</em> <strong>while a background instance is</strong>
running and break the syntax, the background instance will die silently.
Unfortunately, it cannot die noisily because we do not yet know whether
syslog should be enabled. On some systems, fetchmail dies quietly even
if there is no syntax error; this seems to have something to do with
buggy terminal ioctl code in the kernel.</p>
<p>The -f - option (reading a configuration from stdin) is incompatible
with the plugin option.</p>
<p>The 'principal' option only handles Kerberos IV, not V.</p>
<p>Interactively entered passwords are truncated after 63 characters. If
you really need to use a longer password, you will have to use a
configuration file.</p>
<p>A backslash as the last character of a configuration file will be
flagged as a syntax error rather than ignored.</p>
<p>The BSMTP error handling is virtually nonexistent and may leave broken
messages behind.</p>
<p>Send comments, bug reports, gripes, and the like to the <a class="reference external" href="mailto:fetchmail-devel&#64;lists.sourceforge.net">fetchmail-devel
list</a></p>
<p>An <a class="reference external" href="https://fetchmail.sourceforge.io/fetchmail-FAQ.html">fetchmail FAQ (in HTML
form)</a> is
available at the fetchmail home page, it should also accompany your
installation.</p>
</section>
<section id="author">
<h2><a class="toc-backref" href="#toc-entry-58" role="doc-backlink">AUTHOR</a></h2>
<p>Fetchmail is currently maintained by Matthias Andree and Rob Funk with
major assistance from Sunil Shetye (for code) and Rob MacGregor (for the
mailing lists).</p>
<p>Most of the code is from <a class="reference external" href="mailto:esr&#64;snark.thyrsus.com">Eric S.
Raymond</a>. Too many other people to name
here have contributed code and patches.</p>
<p>This program is descended from and replaces <strong>popclient</strong>, by <a class="reference external" href="mailto:ceharris&#64;mal.com">Carl
Harris</a>; the internals have become quite
different, but some of its interface design is directly traceable to
that ancestral program.</p>
<p>This manual page has been improved by Matthias Andree, R. Hannes
Beinert, and Héctor García.</p>
</section>
<section id="see-also">
<h2><a class="toc-backref" href="#toc-entry-59" role="doc-backlink">SEE ALSO</a></h2>
<p><strong>README</strong>, <strong>README.SSL</strong>, <strong>README.SSL-SERVER</strong>, <a class="reference external" href="https://www.fetchmail.info/fetchmail-FAQ.html">The Fetchmail
FAQ</a>, <strong>mutt</strong>(1),
<strong>elm</strong>(1), <strong>mail</strong>(1), <strong>sendmail</strong>(8), <strong>popd</strong>(8),
<strong>imapd</strong>(8), <strong>netrc</strong>(5), <a class="reference external" href="https://www.fetchmail.info/">the fetchmail home
page</a>, <a class="reference external" href="https://fetchmail.sourceforge.io/">(alternative
URI)</a>; <a class="reference external" href="https://www.courier-mta.org/maildrop/">the maildrop home
page.</a></p>
</section>
<section id="applicable-standards">
<h2><a class="toc-backref" href="#toc-entry-60" role="doc-backlink">APPLICABLE STANDARDS</a></h2>
<p>Note that this list is just a collection of references and not a
statement as to the actual protocol conformance or requirements in
fetchmail.</p>
<dl class="simple">
<dt>SMTP/ESMTP:</dt>
<dd><p><a class="reference external" href="http://tools.ietf.org/html/rfc821.html">RFC 821</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc2821.html">RFC 2821</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc1869.html">RFC 1869</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc1652.html">RFC 1652</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc1870.html">RFC 1870</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc1983.html">RFC 1983</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc1985.html">RFC 1985</a>,
<a class="reference external" href="http://tools.ietf.org/html/rfc2554.html">RFC 2554</a>.</p>
</dd>
<dt>mail:</dt>
<dd><p><a class="reference external" href="http://tools.ietf.org/html/rfc822.html">RFC 822</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc2822.html">RFC 2822</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc1123.html">RFC 1123</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc1892.html">RFC 1892</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc1894.html">RFC 1894</a>.</p>
</dd>
<dt>POP2:</dt>
<dd><p><a class="reference external" href="http://tools.ietf.org/html/rfc937.html">RFC 937</a></p>
</dd>
<dt>POP3:</dt>
<dd><p><a class="reference external" href="http://tools.ietf.org/html/rfc1081.html">RFC 1081</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc1225.html">RFC 1225</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc1460.html">RFC 1460</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc1725.html">RFC 1725</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc1734.html">RFC 1734</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc1939.html">RFC 1939</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc1957.html">RFC 1957</a>,
<a class="reference external" href="http://tools.ietf.org/html/rfc2195.html">RFC 2195</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc2449.html">RFC 2449</a>.</p>
</dd>
<dt>APOP:</dt>
<dd><p><a class="reference external" href="http://tools.ietf.org/html/rfc1939.html">RFC 1939</a>.</p>
</dd>
<dt>RPOP:</dt>
<dd><p><a class="reference external" href="http://tools.ietf.org/html/rfc1081.html">RFC 1081</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc1225.html">RFC 1225</a>.</p>
</dd>
<dt>IMAP2/IMAP2BIS:</dt>
<dd><p><a class="reference external" href="http://tools.ietf.org/html/rfc1176.html">RFC 1176</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc1732.html">RFC 1732</a>.</p>
</dd>
<dt>IMAP4/IMAP4rev1:</dt>
<dd><p><a class="reference external" href="http://tools.ietf.org/html/rfc1730.html">RFC 1730</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc1731.html">RFC 1731</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc1732.html">RFC 1732</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc2060.html">RFC 2060</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc2061.html">RFC 2061</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc2195.html">RFC 2195</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc2177.html">RFC 2177</a>,
<a class="reference external" href="http://tools.ietf.org/html/rfc2683.html">RFC 2683</a>.</p>
</dd>
<dt>ETRN:</dt>
<dd><p><a class="reference external" href="http://tools.ietf.org/html/rfc1985.html">RFC 1985</a>.</p>
</dd>
<dt>ODMR/ATRN:</dt>
<dd><p><a class="reference external" href="http://tools.ietf.org/html/rfc2645.html">RFC 2645</a>.</p>
</dd>
<dt>OTP:</dt>
<dd><p><a class="reference external" href="http://tools.ietf.org/html/rfc1938.html">RFC 1938</a>.</p>
</dd>
<dt>LMTP:</dt>
<dd><p><a class="reference external" href="http://tools.ietf.org/html/rfc2033.html">RFC 2033</a>.</p>
</dd>
<dt>GSSAPI:</dt>
<dd><p><a class="reference external" href="http://tools.ietf.org/html/rfc1508.html">RFC 1508</a>, <a class="reference external" href="http://tools.ietf.org/html/rfc1734.html">RFC 1734</a>, <a class="reference external" href="https://www.iana.org/assignments/gssapi-service-names/">Generic Security Service Application Program
Interface (GSSAPI)/Kerberos/SimpleAuthentication and Security Layer
(SASL) Service
Names</a>.</p>
</dd>
<dt>TLS:</dt>
<dd><p><a class="reference external" href="http://tools.ietf.org/html/rfc2595.html">RFC 2595</a>.</p>
</dd>
</dl>
</section>
</main>
</body>
</html>
